<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>币联CoinLinkPC-1.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
        }

        .page {
            display: none;
            padding: 2rem;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Sidebar Styles */
        .sidebar {
            transition: width 0.3s;
        }

        .sidebar-item a {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-radius: 8px;
            color: #d1d5db;
            transition: background-color 0.2s, color 0.2s;
            font-size: 15px;
        }

        .sidebar-item a:hover {
            background-color: #374151;
            color: #ffffff;
        }

        .sidebar-item a.active {
            background-color: #4f46e5;
            color: #ffffff;
            font-weight: 600;
        }

        .sidebar-item a.active-parent {
            background-color: #374151;
            color: #ffffff;
        }

        .sidebar-item a i {
            margin-right: 12px;
        }

        .submenu {
            display: none;
            margin-top: 0.25rem;
        }

        .submenu a {
            font-size: 14px;
            padding-top: 8px;
            padding-bottom: 8px;
            padding-left: 3.25rem;
        }

        .submenu a.active {
            background-color: #4338ca;
            color: #ffffff;
            font-weight: 500;
        }

        .sidebar-item.open>.submenu {
            display: block;
        }

        .chevron-icon {
            transition: transform 0.3s;
        }

        .sidebar-item.open .chevron-icon {
            transform: rotate(180deg);
        }

        /* Styles for multi-level sidebar menu */
        .sidebar-link-level-2, .sidebar-link-level-3 {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            font-size: 0.875rem; /* 14px */
            color: #D1D5DB; /* text-gray-300 */
            border-radius: 0.375rem; /* rounded-lg */
            transition: background-color 0.2s, color 0.2s;
            position: relative;
        }

        .sidebar-link-level-2:hover, .sidebar-link-level-3:hover {
            background-color: #374151; /* hover:bg-gray-700 */
            color: #FFFFFF; /* hover:text-white */
        }

        /* Specific styling for Level 2 items that have a submenu */
        .sidebar-item-level-2 > .sidebar-link-level-2 {
            width: 100%;
        }

        /* Level 3 submenu container */
        .submenu-level-3 {
            display: none; /* Hidden by default */
            padding-left: 16px; /* Indent Level 3 items */
        }

        /* Level 3 links */
        .sidebar-link-level-3 {
            padding-top: 6px;
            padding-bottom: 6px;
            font-size: 0.825rem; /* Slightly smaller font */
            color: #9CA3AF; /* text-gray-400 */
        }

        /* Active state for L2 and L3 links */
        .sidebar-link-level-2.active, .sidebar-link-level-3.active {
            background-color: #4F46E5; /* bg-indigo-600 */
            color: #FFFFFF;
            font-weight: 600; /* font-semibold */
        }

        /* Chevron icon rotation */
        .sidebar-link-level-2.open > .chevron-icon {
            transform: rotate(180deg);
        }

        /* A subtle indicator for the active parent menu */
        .sidebar-item-level-2 > .sidebar-link-level-2.has-active-child {
            background-color: #312e81; /* A darker shade of indigo */
            color: #FFFFFF;
        }

        /* General Styles */
        .pm-comment {
            background-color: #fffbeb;
            border-left: 4px solid #facc15;
            padding: 12px 16px;
            border-radius: 4px;
            color: #78350f;
            margin-bottom: 1.5rem;
            font-size: 14px;
        }

        .custom-table {
            width: 100%;
            border-collapse: collapse;
        }

        .custom-table th,
        .custom-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
            font-size: 14px;
            white-space: nowrap;
        }

        .custom-table th {
            background-color: #f9fafb;
            color: #4b5563;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .custom-table th:hover {
            background-color: #f3f4f6;
            cursor: pointer;
        }

        .custom-table tbody tr:hover {
            background-color: #f9fafb;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            font-size: 12px;
            font-weight: 500;
            border-radius: 9999px;
        }

        .badge-green {
            background-color: #dcfce7;
            color: #166534;
        }

        .badge-red {
            background-color: #fee2e2;
            color: #991b1b;
        }

        .badge-yellow {
            background-color: #fef9c3;
            color: #854d0e;
        }

        .badge-blue {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .badge-purple {
            background-color: #ede9fe;
            color: #5b21b6;
        }

        .badge-orange {
            background-color: #ffedd5;
            color: #9a3412;
        }

        .badge-gray {
            background-color: #e5e7eb;
            color: #374151;
        }

        .badge-cyan {
            background-color: #cffafe;
            color: #0e7490;
        }

        /* Permission Tree Style */
        .permission-tree ul {
            padding-left: 1.5rem;
        }

        .permission-tree li {
            margin-top: 0.75rem;
        }

        .permission-tree .module-name {
            font-weight: 600;
            color: #1f2937;
        }

        .permission-tree .page-name {
            font-weight: 500;
            color: #374151;
        }

        .permission-tree .actions-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            padding-left: 1rem;
            margin-top: 0.5rem;
            color: #6b7280;
        }

        .permission-tree input[type=checkbox] {
            width: 1rem;
            height: 1rem;
            accent-color: #4f46e5;
        }

        .permission-tree input[type=checkbox]:disabled {
            accent-color: #9ca3af;
        }

        /* Custom Switch Toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: #4f46e5;
        }

        input:checked+.slider:before {
            transform: translateX(16px);
        }

        /* Modal & Content Styles */
        .modal-content-area {
            overflow-y: auto;
        }

        /* ========== MODAL STYLES (通用模态框样式) ========== */

        /* 模态框背景遮罩 */
        .modal {
            display: none; /* 默认隐藏 */
            position: fixed; /* 固定定位，使其脱离文档流并相对于视口定位 */
            z-index: 1000; /* 设置一个非常高的层级，确保在最上层 */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* 如果内容过长，允许滚动 */
            background-color: rgba(0, 0, 0, 0.5); /* 半透明黑色背景遮罩 */
            
            /* 使用Flexbox轻松实现垂直居中 */
            justify-content: center;
            align-items: center;
        }

        /* 模态框内容区域 */
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px 24px;
            border: 1px solid #888;
            border-radius: 0.75rem; /* 12px */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            position: relative;
            animation: slide-down 0.3s ease-out; /* 添加一个简单的滑入动画 */
        }

        /* 模态框头部 */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }

        /* 模态框主体 */
        .modal-body {
            max-height: 70vh; /* 设置一个最大高度，超出部分可滚动 */
            overflow-y: auto;
            padding: 0.5rem 0;
        }

        /* 模态框底部 */
        .modal-footer {
            display: flex;
            justify-content: flex-end; /* 按钮默认靠右对齐 */
            gap: 0.75rem; /* 按钮之间的间距 */
            border-top: 1px solid #e5e7eb;
            padding-top: 1rem;
            margin-top: 1rem;
        }

        /* 关闭按钮 */
        .modal-close-button {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            line-height: 1;
        }

        .modal-close-button:hover,
        .modal-close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* 滑入动画 */
        @keyframes slide-down {
            from {
                transform: translateY(-30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }  
        
        .table-description,
        .table-content {
            max-width: 250px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
        }

        .template-content-preview,
        .push-content-preview {
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #6b7280;
        }

        #templateEditorModal .ql-editor,
        #richTextConfigModal .ql-editor,
        #announcementModal .ql-editor {
            min-height: 400px;
        }

        .variable-tag {
            background-color: #eef2ff;
            color: #4f46e5;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .variable-tag:hover {
            background-color: #e0e7ff;
        }

        .detail-table {
            border: 1px solid #e5e7eb;
            border-collapse: collapse;
            width: 100%;
        }

        .detail-table td {
            border: 1px solid #e5e7eb;
            padding: 8px 12px;
            font-size: 14px;
        }

        .detail-table .label {
            background-color: #f9fafb;
            font-weight: 500;
            color: #4b5563;
            text-align: right;
            width: 15%;
        }

        .detail-table .value {
            width: 35%;
        }

        .trader-detail-grid {
            display: grid;
            grid-template-columns: repeat(4, auto 1fr);
            gap: 0.5rem 1.5rem;
        }

        .trader-detail-grid dt {
            font-weight: 500;
            color: #4b5563;
            text-align: right;
            white-space: nowrap;
        }

        .trader-detail-grid dd {
            color: #1f2937;
        }

        /* Tab Styles */
        .tab-button {
            padding: 8px 16px;
            font-size: 16px;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab-button:hover {
            color: #1f2937;
        }

        .tab-button.active {
            color: #4f46e5;
            border-bottom-color: #4f46e5;
        }

        .tab-pane {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-pane.active {
            display: block;
        }

        /* Dropdown */
        .dropdown-menu a {
            transition: background-color 0.2s, color 0.2s;
        }

        /* --- NEW STYLES FOR CONTRACT MANAGEMENT --- */
        .signing-progress-bar {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 13px;
        }

        .signing-step {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .signing-step .icon-done {
            color: #22c55e;
        }

        .signing-step .icon-pending {
            color: #f59e0b;
        }

        .signing-step .icon-next {
            color: #9ca3af;
        }

        .separator {
            color: #9ca3af;
        }

        .vertical-stepper {
            list-style: none;
            padding-left: 1.5rem;
            position: relative;
        }

        .vertical-stepper::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 10px;
            bottom: 10px;
            width: 2px;
            background-color: #e5e7eb;
        }

        .vertical-stepper li {
            position: relative;
            margin-bottom: 2rem;
        }

        .vertical-stepper li:last-child {
            margin-bottom: 0;
        }

        .vertical-stepper li .step-icon {
            position: absolute;
            left: -22px;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #f1f5f9;
            border: 2px solid #e5e7eb;
        }

        .vertical-stepper li.done .step-icon {
            background-color: #dcfce7;
            border-color: #22c55e;
        }

        .vertical-stepper li.pending .step-icon {
            background-color: #fef9c3;
            border-color: #f59e0b;
        }

        .vertical-stepper li.next .step-icon {
            background-color: #f1f5f9;
            border-color: #9ca3af;
        }

        .vertical-stepper li p {
            margin: 0;
        }

        .vertical-stepper li .signer {
            font-weight: 600;
            color: #1f2937;
        }

        .vertical-stepper li .time {
            font-size: 12px;
            color: #6b7280;
        }
    </style>
</head>

<body>

    <div id="login-page" class="bg-gray-100 flex items-center justify-center h-screen">
        <div class="w-full max-w-md bg-white rounded-lg shadow-lg p-8">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-2">币联后台系统</h2>
            <p class="text-center text-gray-500 mb-8">欢迎回来，请登录您的账户</p>
            <form onsubmit="event.preventDefault(); login();">
                <div class="mb-4"><label for="username"
                        class="block text-gray-700 text-sm font-bold mb-2">账号</label><input type="text" id="username"
                        name="username" placeholder="请输入您的账号"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        value="admin_manager"></div>
                <div class="mb-6"><label for="password"
                        class="block text-gray-700 text-sm font-bold mb-2">密码</label><input type="password"
                        id="password" name="password" placeholder="请输入您的密码"
                        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        value="password123"></div>
                <div class="mb-6 flex items-center gap-4">
                    <div class="flex-grow"><label for="captcha"
                            class="block text-gray-700 text-sm font-bold mb-2">验证码</label><input type="text"
                            id="captcha" name="captcha" placeholder="请输入验证码"
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                            value="r8xT"></div>
                    <div class="flex-shrink-0 mt-7"><img src="https://via.placeholder.com/100x40.png?text=r8xT"
                            alt="验证码" class="rounded-lg h-10 cursor-pointer" onclick="alert('刷新验证码')"></div>
                </div>
                <div class="mb-4"><button type="submit"
                        class="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:shadow-outline">登
                        录</button></div>
            </form>
        </div>
    </div>

    <div id="app-container" class="flex h-screen w-full" style="display: none;">
        <aside class="sidebar w-64 bg-gray-900 text-white p-4 flex flex-col flex-shrink-0">
            <div class="text-center py-4 border-b border-gray-700">
                <h1 class="text-2xl font-bold">币联后台</h1>
            </div>
            <nav id="sidebar-nav" class="flex-grow mt-6 space-y-1 overflow-y-auto">
                <div class="sidebar-item"><a href="#" class="sidebar-link active"
                        onclick="showPage('dashboard', this)"><i data-lucide="layout-dashboard"></i><span>仪表盘</span></a>
                </div>
                <div class="sidebar-item"><a href="#" class="sidebar-link" onclick="showPage('users', this)"><i
                            data-lucide="users"></i><span>客户管理</span></a></div>
                <div class="sidebar-item"><a href="#" class="sidebar-link" onclick="toggleSubmenu(this)"><i
                            data-lucide="trending-up"></i><span>操盘手管理</span><i data-lucide="chevron-down"
                            class="ml-auto chevron-icon"></i></a>
                    <div class="submenu space-y-1"><a href="#" onclick="showPage('trader-list', this)">操盘手列表</a><a
                            href="#" onclick="showPage('application-review-list', this)">入驻审核列表 </a><a href="#"
                            onclick="showPage('review-history-list', this)">审核记录列表 </span></a>
                    </div>
                </div>
                <div class="sidebar-item"><a href="#" class="sidebar-link" onclick="toggleSubmenu(this)"><i
                            data-lucide="file-text"></i><span>合同管理</span><i data-lucide="chevron-down"
                            class="ml-auto chevron-icon"></i></a>
                    <div class="submenu space-y-1">
                        <a href="#" onclick="showPage('contract-pending-list', this)">待审核合同列表</a>
                        <a href="#" onclick="showPage('contract-active-list', this)">生效中合同列表</a>
                        <a href="#" onclick="showPage('contract-rejected-list', this)">已拒绝合同列表</a>
                        <a href="#" onclick="showPage('contract-finished-list', this)">已结束合同列表</a>
                        <a href="#" onclick="showPage('contract-templates', this)">合同模板管理</a>
                    </div>
                </div>
                <!-- ========== REFACTORED: REVENUE MANAGEMENT ========== -->
                <div class="sidebar-item">
                    <!-- 一级菜单: 收益管理 -->
                    <a href="#" class="sidebar-link" onclick="toggleSubmenu(this)">
                        <i data-lucide="receipt"></i>
                        <span>收益管理</span>
                        <i data-lucide="chevron-down" class="ml-auto chevron-icon"></i>
                    </a>
                    
                    <!-- 二级菜单容器 -->
                    <div class="submenu space-y-1">
                        
                        <!-- 二级菜单 1: 平台收益总览 -->
                        <a href="#" onclick="showPage('settle-overview', this)" class="sidebar-link-level-2">
                            平台收益总览
                        </a>

                        <!-- 二级菜单 2: 平台收益管理 (带有三级菜单) -->
                        <div class="sidebar-item-level-2">
                            <a href="#" class="sidebar-link-level-2" onclick="toggleSubmenu(this, 'level-3')">
                                <span>平台收益管理</span>
                                <i data-lucide="chevron-down" class="ml-auto chevron-icon"></i>
                            </a>
                            <!-- 三级菜单容器 -->
                            <div class="submenu-level-3 space-y-1">
                                <a href="#" onclick="showPage('settle-customer-tosend', this)" class="sidebar-link-level-3">
                                    待发送账单列表
                                </a>
                                <a href="#" onclick="showPage('settle-customer-topay', this)" class="sidebar-link-level-3">
                                    待收款账单列表
                                </a>
                                <a href="#" onclick="showPage('settle-customer-paid', this)" class="sidebar-link-level-3">
                                    已收款账单列表
                                </a>
                            </div>
                        </div>

                        <!-- 二级菜单 3: 平台结算管理 (带有三级菜单) -->
                        <div class="sidebar-item-level-2">
                            <a href="#" class="sidebar-link-level-2" onclick="toggleSubmenu(this, 'level-3')">
                                <span>平台结算管理</span>
                                <i data-lucide="chevron-down" class="ml-auto chevron-icon"></i>
                            </a>
                            <!-- 三级菜单容器 -->
                            <div class="submenu-level-3 space-y-1">
                                <!-- 二级菜单 (特殊): -->
                                <a href="#" onclick="showPage('settle-trader-portal', this)" class="sidebar-link-level-2 mt-2 border-t border-gray-700 pt-2 text-gray-400">
                                    待结算账单列表
                                </a>                                
                                <a href="#" onclick="showPage('settle-trader-approval', this)" class="sidebar-link-level-3">
                                    待审核账单列表
                                </a>
                                <a href="#" onclick="showPage('settle-trader-topay', this)" class="sidebar-link-level-3">
                                    待付款账单列表
                                </a>
                                <a href="#" onclick="showPage('settle-trader-paid', this)" class="sidebar-link-level-3">
                                    已付款账单列表
                                </a>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="sidebar-item"><a href="#" class="sidebar-link" onclick="toggleSubmenu(this)"><i
                            data-lucide="settings"></i><span>系统配置</span><i data-lucide="chevron-down"
                            class="ml-auto chevron-icon"></i></a>
                    <div class="submenu space-y-1"><a href="#" onclick="showPage('settings-accounts', this)">账号管理</a><a
                            href="#" onclick="showPage('settings-roles-mgmt', this)">角色管理</a><a href="#"
                            onclick="showPage('settings-sms-channels', this)">短信渠道配置</a><a href="#"
                            onclick="showPage('settings-sms-app', this)">APP短信配置</a><a href="#"
                            onclick="showPage('settings-app', this)">APP配置</a><a href="#"
                            onclick="showPage('settings-content', this)">消息管理</a></div>
                </div>
                <div class="sidebar-item"><a href="#" class="sidebar-link" onclick="toggleSubmenu(this)"><i
                            data-lucide="shield"></i><span>风控与日志</span><i data-lucide="chevron-down"
                            class="ml-auto chevron-icon"></i></a>
                    <div class="submenu space-y-1"><a href="#" onclick="showPage('risk-monitor', this)">异常交易监控 <span
                                class="ml-2 text-xs text-red-400">(1)</span></a><a href="#"
                            onclick="showPage('risk-api', this)">API Key监控</a><a href="#"
                            onclick="showPage('risk-logs', this)">操作日志</a></div>
                </div>
            </nav>
        </aside>

        <div class="flex-1 flex flex-col">
            <header class="flex-shrink-0 bg-white border-b shadow-sm">
                <div class="flex items-center justify-end h-16 px-6 space-x-6">
                    <button class="relative text-gray-600 hover:text-gray-900 focus:outline-none">
                        <i data-lucide="bell"></i>
                        <span class="absolute -top-1 -right-1 flex h-3 w-3">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                        </span>
                    </button>
                    <div class="relative" id="user-dropdown-container">
                        <button id="user-dropdown-toggle" onclick="toggleUserDropdown()"
                            class="flex items-center space-x-2 text-gray-700 hover:text-gray-900 focus:outline-none">
                            <i data-lucide="user-circle" class="w-8 h-8 text-gray-500"></i>
                            <span class="font-medium text-sm">admin_manager</span>
                            <i data-lucide="chevron-down" class="w-4 h-4"></i>
                        </button>
                        <div id="user-dropdown-menu"
                            class="dropdown-menu absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 hidden">
                            <a href="#" onclick="logout(event)"
                                class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                                <i data-lucide="log-out" class="w-4 h-4 mr-3"></i>
                                <span>退出登录</span>
                            </a>
                        </div>
                    </div>
                </div>
            </header>
            <main class="flex-grow overflow-y-auto">
                <div id="dashboard" class="page" style="display: block;">
                    <h1 class="text-2xl font-bold text-gray-800">仪表盘</h1>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-6">
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">管理总资产 (AUM)</p>
                            <p class="text-3xl font-bold text-gray-800">$1,283,450</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">24小时总盈亏</p>
                            <p class="text-3xl font-bold text-green-600">+$12,530</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">生效中合同数</p>
                            <p class="text-3xl font-bold text-gray-800">34</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">活跃操盘手数</p>
                            <p class="text-3xl font-bold text-red-600">11</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6">
                        <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-lg font-semibold text-gray-700 mb-4">AUM增长曲线 (最近30天)</h2>
                            <div style="height:320px;"><canvas id="aumTrendChart"></canvas></div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-lg font-semibold text-gray-700 mb-4">待办事项详情区</h2>
                            <ul class="space-y-4">
                                <li class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg hover:bg-yellow-100 cursor-pointer"
                                    onclick="showPage('contract-pending-list', this)">
                                    <div>
                                        <p class="font-medium text-yellow-800">待审核合同</p>
                                    </div><span class="font-bold text-yellow-600">1</span>
                                </li>
                                <li class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer"
                                    onclick="showPage('application-review-list', this)">
                                    <div>
                                        <p class="font-medium text-gray-800">操盘手入驻审核</p>
                                    </div><span class="font-bold text-indigo-600">2</span>
                                </li>
                                <li class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer"
                                    onclick="showPage('settle-trader-approval', this)">
                                    <div>
                                        <p class="font-medium text-gray-800">待审核账单</p>
                                    </div><span class="font-bold text-indigo-600">1</span>
                                </li>
                                
                                <li class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer"
                                    onclick="showPage('settle-trader-topay', this)">
                                    <div>
                                        <p class="font-medium text-gray-800">待付款账单</p>
                                    </div><span class="font-bold text-indigo-600">1</span>
                                </li>
                                <li class="flex items-center justify-between p-3 bg-red-50 rounded-lg hover:bg-red-100 cursor-pointer"
                                    onclick="showPage('risk-monitor', this)">
                                    <div>
                                        <p class="font-medium text-red-800">异常交易警报</p>
                                    </div><span class="font-bold text-red-600">1</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="users" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">客户管理</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-nowrap items-center gap-4">
                            <!-- 姓名搜索框 -->
                            <input type="text" placeholder="客户姓名"
                                class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                            <!-- 昵称搜索框 -->
                            <input type="text" placeholder="操盘手昵称"
                                class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                            <!-- 手机号搜索框 -->
                            <input type="text" placeholder="客户手机号"
                                class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                            <!-- 合同状态下拉框 -->
                            <select
                                class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="">合同状态</option>
                                <option>审核中</option>
                                <option>生效中</option>
                                <option>已拒绝</option>
                                <option>已结束</option>
                            </select>
                            <!-- 交易所下拉框 -->
                            <select
                                class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="">交易所</option>
                                <option>币安</option>
                                <option>欧易</option>
                            </select>
                            <!-- 搜索按钮 (现在在 flex 容器内部了) -->
                            <button
                                class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 flex-shrink-0">重置</button>
                            <button
                                class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 flex-shrink-0">搜索</button>
                        </div>
                    </div>

                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>委托合同编号</th>
                                    <th>姓名</th>
                                    <th>手机号</th>
                                    <th>操盘手昵称</th>
                                    <th>合同状态</th>
                                    <th>委托金额(USDT)</th>
                                    <th>账号别名</th>                                    
                                    <th>API Key</th>
                                    <th>Secret Key</th>
                                    <th>交易所</th>
                                    <th>累计收益(USDT)</th>
                                    <th>委托周期</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="customer-table-body">
                                <tr data-api-key="bkCiOAbcdeFGhijkLmnopqrsTUVWXYZ12345Vb4qE"
                                    data-secret-key="pl9kOjIuhYgTfRdEsWaQzXcVBnMMnBvCxZ123tG8wN">
                                    <td>CON-2023-001</td>
                                    <td>张三</td>
                                    <td>188****7953</td>
                                    <td>Alpha Trader</td>
                                    <td><span class="badge badge-green">生效中</span></td>
                                    <td>50,000.00</td>
                                    <td>币安001</td>                                    
                                    <td class="api-key-container"><span class="font-mono text-sm">************</span>
                                    </td>
                                    <td class="secret-key-container"><span class="font-mono text-sm">************</span>
                                    </td>
                                    <td>币安</td>
                                    <td class="text-green-600">+5,120.50</td>
                                    <td>2023-01-01 - 2024-01-01</td>
                                    <td><button
                                            class="key-toggle-btn text-sm text-indigo-600 hover:text-indigo-800 font-semibold">显示Key</button>
                                    </td>
                                </tr>
                                <tr data-api-key="zxcVBnmLKJhgfdsaPOIUYtrewqASDFGhjklAsdFg"
                                    data-secret-key="lkjHGFdsaZXCVbnmQWERTYuiopPOIUYtrewqPOiuy">
                                    <td>CON-2022-088</td>
                                    <td>张三</td>
                                    <td>188****7953</td>
                                    <td>Beta Quant</td>
                                    <td><span class="badge badge-gray">已结束</span></td>
                                    <td>100,000.00</td>
                                    <td>欧易001</td>  
                                    <td class="api-key-container"><span class="font-mono text-sm">************</span>
                                    </td>
                                    <td class="secret-key-container"><span class="font-mono text-sm">************</span>
                                    </td>
                                    <td>欧易</td>
                                    <td class="text-green-600">+18,450.00</td>
                                    <td>2022-09-15 - 2023-09-15</td>
                                    <td><button
                                            class="key-toggle-btn text-sm text-indigo-600 hover:text-indigo-800 font-semibold">显示Key</button>
                                    </td>
                                </tr>
                                <tr data-api-key="qweRTYuiopASDFghjklZXCVbnmQWERTYuiopYuiOp"
                                    data-secret-key="mnbVCxzLKJhgfdsaPOIUYtrewqASDFGhjklXZlkj">
                                    <td>CON-2023-015</td>
                                    <td>张三</td>
                                    <td>188****7953</td>
                                    <td>Delta Moderate</td>
                                    <td><span class="badge badge-red">已拒绝</span></td>
                                    <td>25,000.00</td>
                                    <td>币安003</td>   
                                    <td class="api-key-container"><span class="font-mono text-sm">************</span>
                                    </td>
                                    <td class="secret-key-container"><span class="font-mono text-sm">************</span>
                                    </td>
                                    <td>币安</td>
                                    <td class="text-red-600"> </td>
                                    <td>-</td>
                                    <td><button>显示Key</button>
                                    </td>
                                </tr>
                                <tr data-api-key="qweRTYuiopASDFghjklZXCVbnmQWERTYuiopYuiOp"
                                    data-secret-key="mnbVCxzLKJhgfdsaPOIUYtrewqASDFGhjklXZlkj">
                                    <td>CON-2023-015</td>
                                    <td>张三</td>
                                    <td>188****7953</td>
                                    <td>Delta Moderate</td>
                                    <td><span class="badge badge-blue">审核中</span></td>
                                    <td>25,000.00</td>
                                    <td>币安002</td>   
                                    <td class="api-key-container"><span class="font-mono text-sm">************</span>
                                    </td>
                                    <td class="secret-key-container"><span class="font-mono text-sm">************</span>
                                    </td>
                                    <td>币安</td>
                                    <td class="text-red-600"> </td>
                                    <td> - </td>
                                    <td><button>显示Key</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 157 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">3</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">16</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="trader-list" class="page">
                    <div class="flex justify-start  gap-4 items-center">
                        <!-- 这是你的标题 -->
                        <h1 class="text-2xl font-bold text-gray-800">操盘手列表</h1>
                        <!-- 步骤2: 把“新增”按钮从下面的白色面板中“剪切”到这里 -->
                        <button onclick="openTraderModal('add', this)"
                        class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 flex items-center">新增</button>
                    </div>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-2">
                                <!-- 姓名搜索框 -->
                                <input type="text" placeholder="姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 昵称搜索框 -->
                                <input type="text" placeholder="昵称"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 手机号搜索框 -->
                                <input type="text" placeholder="手机号"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 保留原有的下拉选择框 -->
                                <select
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                    <option value="">所有交易风格</option>
                                    <option>稳健型</option>
                                    <option>平衡型</option>
                                    <option>激进型</option>
                                </select>
                                <!-- 搜索按钮 -->
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table id="trader-table" class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>
                                        <div class="flex items-center">序号 <i data-lucide="arrow-up-down"
                                                class="ml-1 h-4 w-4"></i></div>
                                    </th>
                                    <th>
                                        <div class="flex items-center">姓名 </div>
                                    </th>
                                    <th>
                                        <div class="flex items-center">推荐排序 <i data-lucide="arrow-up-down"
                                                class="ml-1 h-4 w-4"></i></div>
                                    </th>
                                    <th>
                                        <div class="flex items-center">操盘手昵称 </div>
                                    </th>
                                    <th>公司</th>
                                    <th>手机号码</th>
                                    <th>身份证号码</th>
                                    <th>交易风格</th>
                                    <th>交易经验(年)</th>
                                    <th>起投资金(USDT)</th>
                                    <th>简介</th>
                                    <th>收款信息</th>
                                    <th>结算周期</th>
                                    <th>管理费率(%)</th>                                                                       
                                    <th>委托总资产(AUM)</th>
                                    <th>累计收益</th>
                                    <th>最大回撤</th>
                                    <th>委托人数</th>
                                    <th>状态</th>
                                    <th>审批人</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-trader-id="T01">
                                    <td>1</td>
                                    <td class="trader-name">张伟</td>
                                    <td class="trader-sort">1</td>
                                    <td class="trader-nickname">Alpha Trader</td>
                                    <td class="trader-company">-</td>
                                    <td class="trader-phone">138****1111</td>
                                    <td class="trader-idcard">43112219****01123X</td>
                                    <td class="trader-style">稳健型</td>
                                    <td class="trader-experience">8</td>
                                    <td class="trader-min-investment">50000</td>
                                    <td class="table-description trader-bio" title="长期价值投资，专注低风险套利与趋势跟踪。">
                                        长期价值投资，专注低风险套利与趋势跟踪。</td>
                                    <td title="TRC20: T...xyz">TRC20: T...xyz </td>
                                    <td>12个月</td>
                                    <td>20%</td>   
                                    <td>$570,000</td>
                                    <td class="text-green-600">+$85,500</td>
                                    <td>-5.2%</td>
                                    <td>15</td>
                                    <td>
                                        <div onclick="toggleTraderStatus(this)"
                                            class="relative inline-flex items-center h-5 rounded-full w-10 cursor-pointer transition-colors bg-indigo-600">
                                            <span
                                                class="inline-block w-3 h-3 transform bg-white rounded-full transition-transform translate-x-6"></span>
                                        </div>
                                    </td>
                                    <td>admin_01</td>
                                    <td class="space-x-2"><button onclick="openTraderModal('view', this)"
                                            class="text-blue-600 hover:underline">查看</button><button
                                            onclick="openTraderModal('edit', this)"
                                            class="text-indigo-600 hover:underline">编辑</button></td>
                                </tr>
                                <tr data-trader-id="T02">
                                    <td>2</td>
                                    <td class="trader-name">李娜</td>
                                    <td class="trader-sort">3</td>
                                    <td class="trader-nickname">Beta Quant</td>
                                    <td class="trader-company">阿尔法资本</td>
                                    <td class="trader-phone">139****2222</td>
                                    <td class="trader-phone">43112219****01123X</td>
                                    <td class="trader-style">激进型</td>
                                    <td class="trader-experience">5</td>
                                    <td class="trader-min-investment">100000</td>
                                    <td class="table-description trader-bio" title="高频交易，主攻短线波动，追求绝对收益。">
                                        高频交易，主攻短线波动，追求绝对收益。</td>
                                    <td title="TRC20: T...xyz">TRC20: T...xyz </td>
                                    <td>3个月</td>
                                    <td>20%</td>                                                                        
                                    <td>$410,000</td>
                                    <td class="text-green-600">+$123,000</td>
                                    <td>-18.5%</td>
                                    <td>8</td>
                                    <td>
                                        <div onclick="toggleTraderStatus(this)"
                                            class="relative inline-flex items-center h-5 rounded-full w-10 cursor-pointer transition-colors bg-indigo-600">
                                            <span
                                                class="inline-block w-3 h-3 transform bg-white rounded-full transition-transform translate-x-6"></span>
                                        </div>
                                    </td>
                                    <td>admin_01</td>
                                    <td class="space-x-2"><button onclick="openTraderModal('view', this)"
                                            class="text-blue-600 hover:underline">查看</button><button
                                            onclick="openTraderModal('edit', this)"
                                            class="text-indigo-600 hover:underline">编辑</button></td>
                                </tr>
                                <tr data-trader-id="T03">
                                    <td>3</td>
                                    <td class="trader-name">王强</td>
                                    <td class="trader-sort">2</td>
                                    <td class="trader-nickname">Delta Moderate</td>
                                    <td class="trader-company">-</td>
                                    <td class="trader-phone">137****3333</td>
                                    <td class="trader-phone">43112219****01123X</td>
                                    <td class="trader-style">平衡型</td>
                                    <td class="trader-experience">10</td>
                                    <td class="trader-min-investment">80000</td>
                                    <td class="table-description trader-bio" title="中长线波段操作，兼顾成长与价值。">中长线波段操作，兼顾成长与价值。
                                    </td>
                                    <td title="TRC20: T...xyz">TRC20: T...xyz </td>
                                    <td>6个月</td>
                                    <td>15%</td>    
                                    <td>$300,000</td>
                                    <td class="text-green-600">+$60,000</td>
                                    <td>-9.8%</td>
                                    <td>12</td>
                                    <td>
                                        <div onclick="toggleTraderStatus(this)"
                                            class="relative inline-flex items-center h-5 rounded-full w-10 cursor-pointer transition-colors bg-indigo-600">
                                            <span
                                                class="inline-block w-3 h-3 transform bg-white rounded-full transition-transform translate-x-6"></span>
                                        </div>
                                    </td>
                                    <td>admin_02</td>
                                    <td class="space-x-2"><button onclick="openTraderModal('view', this)"
                                            class="text-blue-600 hover:underline">查看</button><button
                                            onclick="openTraderModal('edit', this)"
                                            class="text-indigo-600 hover:underline">编辑</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="application-review-list" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">入驻审核列表</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-2">
                                <!-- 姓名搜索框 -->
                                <input type="text" placeholder="姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 昵称搜索框 -->
                                <input type="text" placeholder="昵称"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 手机号搜索框 -->
                                <input type="text" placeholder="手机号"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 保留原有的下拉选择框 -->
                                <select
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                    <option value="">所有交易风格</option>
                                    <option>稳健型</option>
                                    <option>平衡型</option>
                                    <option>激进型</option>
                                </select>
                                </select><input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"><span
                                    class="mx-2 text-gray-500">至</span><input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"></select>
                                <!-- 重置搜索按钮 -->
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div id="tab-pane-pending-review" class="tab-pane active mt-6">
                        <div class="bg-white rounded-xl shadow-md overflow-x-auto">
                            <table class="custom-table w-full">
                                <thead>
                                    <tr>
                                        <th>申请时间</th>
                                        <th>姓名</th>
                                        <th>操盘手昵称</th>
                                        <th>公司</th>
                                        <th>手机号</th>
                                        <th>身份证号码</th>
                                        <th>交易风格</th>
                                        <th>交易经验</th>
                                        <th>起投资金</th>
                                        <th>简介</th>

                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>2024-06-10 14:00</td>
                                        <td class="trader-name">王大力</td>
                                        <td class="trader-nickname">Stable Growth</td>
                                        <td class="trader-company">新火科技</td>
                                        <td class="trader-phone">139****0001</td>
                                        <td class="trader-idcard">43112219****01123X</td>
                                        <td class="trader-style">激进型</td>
                                        <td class="trader-experience">5年</td>
                                        <td class="trader-min-investment">50万 USDT</td>
                                        <td class="table-description trader-bio" title="短线高频交易，熟悉各类技术指标，风控意识强。">短线高频...
                                        </td>
                                        <td class="space-x-2">
                                            <!-- 通过 和 拒绝 按钮暂时保持不变 -->
                                            <a href="#" class="text-green-600 hover:underline">通过</a>
                                            <a href="#" class="text-red-600 hover:underline">拒绝</a>
                                            <!-- 重点看这里：我们把“详情”链接改成了功能按钮 -->
                                            <button onclick="openTraderModal('view', this)"
                                                class="text-indigo-600 hover:underline">
                                                详情
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2024-06-09 11:30</td>
                                        <td class="trader-name">陈思</td>
                                        <td class="trader-nickname">Delta Moderate</td>
                                        <td class="trader-company">-</td>
                                        <td class="trader-phone">137****1122</td>
                                        <td class="trader-idcard">43112219****01123X</td>
                                        <td class="trader-style">稳健型</td>
                                        <td class="trader-experience">8年</td>
                                        <td class="trader-min-investment">80万 USDT</td>
                                        <td class="table-description trader-bio" title="专注主流币种低风险套利和中长线价值投资。">专注主流...
                                        </td>
                                        <td class="space-x-2">
                                            <!-- 通过 和 拒绝 按钮暂时保持不变 -->
                                            <a href="#" class="text-green-600 hover:underline">通过</a>
                                            <a href="#" class="text-red-600 hover:underline">拒绝</a>
                                            <!-- 重点看这里：我们把“详情”链接改成了功能按钮 -->
                                            <button onclick="openTraderModal('view', this)"
                                                class="text-indigo-600 hover:underline">
                                                详情
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- 分页组件 -->
                            <div class="flex items-center justify-between p-4 border-t">
                                <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                                <div class="flex space-x-1">
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                    <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                    <span>...</span>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="review-history-list" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">审核记录列表</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-2">
                                <!-- 姓名搜索框 -->
                                <input type="text" placeholder="姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 昵称搜索框 -->
                                <input type="text" placeholder="昵称"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 手机号搜索框 -->
                                <input type="text" placeholder="手机号"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 保留原有的下拉选择框 -->
                                <select
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                    <option value="">所有交易风格</option>
                                    <option>稳健型</option>
                                    <option>平衡型</option>
                                    <option>激进型</option>
                                </select>
                                </select><input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"><span
                                    class="mx-2 text-gray-500">至</span><input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"></select>
                                <!-- 重置搜索按钮 -->
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div id="tab-pane-review-history" class="tab-pane active mt-6">
                        <div class="bg-white rounded-xl shadow-md overflow-x-auto">
                            <table class="custom-table w-full">
                                <thead>
                                    <tr>
                                        <th>申请时间</th>
                                        <th>姓名</th>
                                        <th>操盘手昵称</th>
                                        <th>公司</th>
                                        <th>手机号</th>
                                        <th>身份证号码</th>
                                        <th>交易风格</th>
                                        <th>交易经验</th>
                                        <th>起投资金</th>
                                        <th>审核结果</th>
                                        <th>审核人</th>
                                        <th>审核时间</th>
                                        <th>备注</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>2024-06-08 09:00</td>
                                        <td class="trader-name">李军</td>
                                        <td class="trader-nickname">Stable Growth</td>
                                        <td class="trader-company">新火科技</td>
                                        <td class="trader-phone">158****9999</td>
                                        <td class="trader-idcard">43112219****01123X</td>
                                        <td class="trader-style">激进型</td>
                                        <td class="trader-experience">5年</td>
                                        <td class="trader-min-investment">50万 USDT</td>
                                        <td><span class="badge badge-green">通过</span></td>
                                        <td>admin_manager</td>
                                        <td>2024-06-08 15:30</td>
                                        <td> </td>
                                        <td>
                                            <button onclick="openTraderModal('view', this)"
                                                class="text-indigo-600 hover:underline">详情</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2024-06-08 09:00</td>
                                        <td class="trader-name">李军</td>
                                        <td class="trader-nickname">Stable Growth</td>
                                        <td class="trader-company">新火科技</td>
                                        <td class="trader-phone">158****9999</td>
                                        <td class="trader-idcard">43112219****01123X</td>
                                        <td class="trader-style">激进型</td>
                                        <td class="trader-experience">5年</td>
                                        <td class="trader-min-investment">50万 USDT</td>
                                        <td><span class="badge badge-red">拒绝</span></td>
                                        <td>admin_manager</td>
                                        <td>2024-06-08 15:30</td>
                                        <td>资料不完整</td>
                                        <td>
                                            <button onclick="openTraderModal('view', this)"
                                                class="text-indigo-600 hover:underline">详情</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- 分页组件 -->
                            <div class="flex items-center justify-between p-4 border-t">
                                <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                                <div class="flex space-x-1">
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                    <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                    <span>...</span>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== START: CONTRACT MANAGEMENT REFACTORED ========== -->
                <div id="contract-pending-list" class="page">
                    <h1 class="text-2xl font-bold text-gray-800 mt-6">待审核合同列表</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-2">
                                <!-- 客户姓名搜索框 -->
                                <input type="text" placeholder="客户姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 客户手机号码搜索框 -->
                                <input type="text" placeholder="客户手机号码"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 操盘手姓名搜索框 -->
                                <input type="text" placeholder="操盘手姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 操盘手手机号码搜索框 -->
                                <input type="text" placeholder="操盘手手机号码"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"><span
                                    class="mx-2 text-gray-500">至</span><input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"></select>
                                <!-- 搜索按钮 -->
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>

                    <div class="overflow-x-auto mt-6 bg-white">
                        <table class="w-full text-sm text-left text-gray-500 table-fixed">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 w-28">合同编号</th>
                                    <th class="px-6 py-3 w-24">客户姓名</th>
                                    <th class="px-6 py-3 w-32">客户手机号</th>
                                    <th class="px-6 py-3 w-24">客户类型</th>
                                    <th class="px-6 py-3 w-32">操盘手姓名</th>
                                    <th class="px-6 py-3 w-32">操盘手手机号</th>
                                    <th class="px-6 py-3 w-24">操盘手类型</th>
                                    <th class="px-6 py-3 w-40">公司</th>
                                    <th class="px-6 py-3 w-40">合同名称</th>
                                    <th class="px-6 py-3 w-32">委托金额(USDT)</th>
                                    <th class="px-6 py-3 w-28">委托周期</th>
                                    <th class="px-6 py-3 w-40">申请时间</th>
                                    <th class="px-6 py-3 w-24">操作</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-800">
                                <tr class="bg-white border-b hover:bg-gray-50">
                                    <td class="px-6 py-4 font-mono">CON-001</td>
                                    <td class="px-6 py-4">王五</td>
                                    <td class="px-6 py-4">150****8888</td>
                                    <td class="px-6 py-4">稳健性</td>                                        
                                    <td class="px-6 py-4">AlphaTrader</td>
                                    <td class="px-6 py-4">186****5678</td> 
                                    <td class="px-6 py-4">激进型</td>                                                                                
                                    <td class="px-6 py-4">Alpha量化</td>
                                    <td class="px-6 py-4 font-medium">标准跟单服务合同</td>
                                    <td class="px-6 py-4 font-semibold text-green-600">50,000</td>
                                    <td class="px-6 py-4">12个月</td>
                                    <td class="px-6 py-4">2024-08-28 10:30</td>
                                    <td class="px-6 py-4"><button onclick="openModal('reviewContractModal', 'review')" class="font-medium text-indigo-600 hover:underline">审核</button></td>
                                </tr>
                                <tr class="bg-white border-b hover:bg-gray-50">
                                    <td class="px-6 py-4 font-mono">CON-002</td>
                                    <td class="px-6 py-4">赵六</td>
                                    <td class="px-6 py-4">139****4321</td>    
                                    <td class="px-6 py-4">平衡型</td>                                                                                
                                    <td class="px-6 py-4">BetaBot</td>
                                    <td class="px-6 py-4">185****8765</td>
                                    <td class="px-6 py-4">平衡型</td>    
                                    <td class="px-6 py-4">Beta 投资</td>
                                    <td class="px-6 py-4 font-medium">VIP量化服务合同</td>
                                    <td class="px-6 py-4 font-semibold text-green-600">200,000</td>
                                    <td class="px-6 py-4">6个月</td>
                                    <td class="px-6 py-4">2024-08-28 09:15</td>
                                    <td class="px-6 py-4"><button onclick="openModal('reviewContractModal', 'review')" class="font-medium text-indigo-600 hover:underline">审核</button></td>
                                </tr>
                                <tr class="bg-white hover:bg-gray-50">
                                    <td class="px-6 py-4 font-mono">CON-003</td>
                                    <td class="px-6 py-4">周八</td>
                                    <td class="px-6 py-4">137****1111</td>   
                                    <td class="px-6 py-4">激进型</td>                                                                                
                                    <td class="px-6 py-4">Gamma Striker</td>
                                    <td class="px-6 py-4">188****2222</td>      
                                    <td class="px-6 py-4">激进型</td>                                   
                                    <td class="px-6 py-4">Gamma 策略</td>
                                    <td class="px-6 py-4 font-medium">标准跟单服务合同</td>
                                    <td class="px-6 py-4 font-semibold text-green-600">10,000</td>
                                    <td class="px-6 py-4">24个月</td>
                                    <td class="px-6 py-4">2024-08-27 18:20</td>
                                    <td class="px-6 py-4"><button onclick="openModal('reviewContractModal', 'review')" class="font-medium text-indigo-600 hover:underline">审核</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. 生效中列表 -->
                <div id="contract-active-list" class="page">
                    <h1 class="text-2xl font-bold text-gray-800 mt-6">生效中合同列表</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-2">
                                <!-- 客户姓名搜索框 -->
                                <input type="text" placeholder="客户姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 客户手机号码搜索框 -->
                                <input type="text" placeholder="客户手机号码"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 操盘手姓名搜索框 -->
                                <input type="text" placeholder="操盘手姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 操盘手手机号码搜索框 -->
                                <input type="text" placeholder="操盘手手机号码"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"><span
                                    class="mx-2 text-gray-500">至</span><input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"></select>
                                <!-- 搜索按钮 -->
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div class="overflow-x-auto mt-6 bg-white">
                        <table class="w-full text-sm text-left text-gray-500 table-fixed">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 w-28">合同编号</th>
                                    <th class="px-6 py-3 w-24">客户姓名</th>
                                    <th class="px-6 py-3 w-32">客户手机号</th>
                                    <th class="px-6 py-3 w-24">客户类型</th>
                                    <th class="px-6 py-3 w-32">操盘手姓名</th>
                                    <th class="px-6 py-3 w-32">操盘手手机号</th>
                                    <th class="px-6 py-3 w-24">操盘手类型</th>
                                    <th class="px-6 py-3 w-32">公司</th>
                                    <th class="px-6 py-3 w-40">合同名称</th>
                                    <th class="px-6 py-3 w-32">委托金额(USDT)</th>
                                    <th class="px-6 py-3 w-28">委托周期</th>
                                    <th class="px-6 py-3 w-24">申请时间</th>
                                    <th class="px-6 py-3 w-24">审核时间</th>
                                    <th class="px-6 py-3 w-24">审批人</th>                                        
                                    <th class="px-6 py-3 w-24">操作</th>
                                </tr>                                                    
                            </thead>
                            <tbody class="text-gray-800">
                                <tr class="bg-white border-b hover:bg-gray-50">
                                    <td class="px-6 py-4 font-mono">CON-004</td>
                                    <td class="px-6 py-4">李四</td>
                                    <td class="px-6 py-4">150****8888</td>
                                    <td class="px-6 py-4">稳健型</td>                                        
                                    <td class="px-6 py-4">DeltaOne</td>
                                    <td class="px-6 py-4">159****9999</td>    
                                    <td class="px-6 py-4">稳健型</td>                                       
                                    <td class="px-6 py-4">Delta 资本</td>
                                    <td class="px-6 py-4 font-medium">标准跟单服务合同</td>
                                    <td class="px-6 py-4 font-semibold text-green-600">80,000</td>
                                    <td class="px-6 py-4">12个月</td>
                                    <td class="px-6 py-4">2024-08-27 14:05</td>
                                    <td class="px-6 py-4">2024-08-27 14:05</td>
                                    <td class="px-6 py-4">admin_legal</td>
                                    <td class="px-6 py-4"><button onclick="openModal('reviewContractModal', 'view')" class="font-medium text-indigo-600 hover:underline">查看</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 3. 已拒绝合同列表 -->
                <div id="contract-rejected-list" class="page">
                    <h1 class="text-2xl font-bold text-gray-800 mt-6">已拒绝合同列表</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-2">
                                <!-- 客户姓名搜索框 -->
                                <input type="text" placeholder="客户姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 客户手机号码搜索框 -->
                                <input type="text" placeholder="客户手机号码"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 操盘手姓名搜索框 -->
                                <input type="text" placeholder="操盘手姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 操盘手手机号码搜索框 -->
                                <input type="text" placeholder="操盘手手机号码"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"><span
                                    class="mx-2 text-gray-500">至</span><input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"></select>
                                <!-- 搜索按钮 -->
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div class="overflow-x-auto mt-6 bg-white">
                        <table class="w-full text-sm text-left text-gray-500 table-fixed">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 w-28">合同编号</th>
                                    <th class="px-6 py-3 w-24">客户姓名</th>
                                    <th class="px-6 py-3 w-32">客户手机号</th>
                                    <th class="px-6 py-3 w-24">客户类型</th>
                                    <th class="px-6 py-3 w-32">操盘手姓名</th>
                                    <th class="px-6 py-3 w-32">操盘手手机号</th>
                                    <th class="px-6 py-3 w-24">操盘手类型</th>
                                    <th class="px-6 py-3 w-32">公司</th>
                                    <th class="px-6 py-3 w-40">合同名称</th>
                                    <th class="px-6 py-3 w-32">委托金额(USDT)</th>
                                    <th class="px-6 py-3 w-28">委托周期</th>
                                    <th class="px-6 py-3 w-24">申请时间</th>
                                    <th class="px-6 py-3 w-24">拒绝时间</th>
                                    <th class="px-6 py-3 w-24">审批人</th>                                        
                                    <th class="px-6 py-3 w-24">拒绝原因</th>
                            </thead>
                            <tbody class="text-gray-800">
                                <tr class="bg-white border-b hover:bg-gray-50">
                                    <td class="px-6 py-4 font-mono">CON-005</td>
                                    <td class="px-6 py-4">孙七</td>
                                    <td class="px-6 py-4">136****7777</td>   
                                    <td class="px-6 py-4">稳健性</td>                                                                                
                                    <td class="px-6 py-4">Omega Master</td>
                                    <td class="px-6 py-4">158****6666</td>   
                                    <td class="px-6 py-4">稳健性</td>                                         
                                    <td class="px-6 py-4">Omega 基金</td>
                                    <td class="px-6 py-4 font-medium">VIP量化服务合同</td>
                                    <td class="px-6 py-4 font-semibold text-green-600">500,000</td>
                                    <td class="px-6 py-4">36个月</td>
                                    <td class="px-6 py-4">2024-08-26 11:50</td>
                                    <td class="px-6 py-4">2024-08-26 11:50</td>
                                    <td class="px-6 py-4">superadmin</td>
                                    <td class="px-6 py-4 text-red-600">客户资质不符合VIP要求</td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. 已结束列表 -->
                 <div id="contract-finished-list" class="page">
                    <h1 class="text-2xl font-bold text-gray-800 mt-6">已结束合同列表</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center space-x-2">
                                <!-- 客户姓名搜索框 -->
                                <input type="text" placeholder="客户姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 客户手机号码搜索框 -->
                                <input type="text" placeholder="客户手机号码"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 操盘手姓名搜索框 -->
                                <input type="text" placeholder="操盘手姓名"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <!-- 操盘手手机号码搜索框 -->
                                <input type="text" placeholder="操盘手手机号码"
                                    class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                                <input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"><span
                                    class="mx-2 text-gray-500">至</span><input type="date"
                                    class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500"></select>
                                <!-- 搜索按钮 -->
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div class="overflow-x-auto mt-6 bg-white">
                        <table class="w-full text-sm text-left text-gray-500 table-fixed">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 w-24">合同编号</th>
                                    <th class="px-6 py-3 w-24">客户姓名</th>
                                    <th class="px-6 py-3 w-32">客户手机号</th>
                                    <th class="px-6 py-3 w-24">客户类型</th>
                                    <th class="px-6 py-3 w-32">操盘手姓名</th>
                                    <th class="px-6 py-3 w-32">操盘手手机号</th>
                                    <th class="px-6 py-3 w-24">操盘手类型</th>
                                    <th class="px-6 py-3 w-24">公司</th>
                                    <th class="px-6 py-3 w-40">合同名称</th>
                                    <th class="px-6 py-3 w-24">委托金额(USDT)</th>
                                    <th class="px-6 py-3 w-24">委托周期</th>
                                    <th class="px-6 py-3 w-24">申请时间</th>
                                    <th class="px-6 py-3 w-24">审核时间</th>
                                    <th class="px-6 py-3 w-24">审批人</th>                                        
                                    <th class="px-6 py-3 w-24">操作</th>
                            </thead>
                            <tbody class="text-gray-800">
                                <tr class="bg-white border-b hover:bg-gray-50">
                                    <td class="px-6 py-4 font-mono">CON-006</td>
                                    <td class="px-6 py-4">吴九</td>
                                    <td class="px-6 py-4">133****5555</td>    
                                    <td class="px-6 py-4">激进型</td>                                                                                
                                    <td class="px-6 py-4">Zeta Trader</td>
                                    <td class="px-6 py-4">155****4444</td>  
                                    <td class="px-6 py-4">激进型</td>                                           
                                    <td class="px-6 py-4">Zeta 技术</td>
                                    <td class="px-6 py-4 font-medium">标准跟单服务合同</td>
                                    <td class="px-6 py-4 font-semibold text-green-600">20,000</td>
                                    <td class="px-6 py-4">12个月</td>
                                    <td class="px-6 py-4">2023-08-28 10:05</td>                                       
                                    <td class="px-6 py-4">2023-08-28 10:05</td>
                                    <td class="px-6 py-4">admin_legal</td>
                                    <td class="px-6 py-4"><button onclick="openModal('reviewContractModal', 'view')" class="font-medium text-indigo-600 hover:underline">查看</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>                          

                <div id="contract-templates" class="page">
                    <div class="flex justify-start  gap-4 items-center">
                        <!-- 这是你的标题 -->
                        <h1 class="text-2xl font-bold text-gray-800">合同模板管理</h1>
                        <!-- 步骤2: 把“新增”按钮从下面的白色面板中“剪切”到这里 -->
                        <button onclick="openTemplateEditor(false)"
                            class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 flex items-center">新增</button>
                    </div>
                    <div class="flex justify-between items-center">
                        <h1 class="text-2xl font-bold text-gray-800"></h1>
                    </div>
                    <div class="mt-6 flex items-center space-x-2 bg-white p-4 rounded-xl shadow-md">
                        <!-- 输入模板名称关键字 -->
                        <input type="text" placeholder="模板名称"
                            class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                        <!-- 昵称搜索框 -->
                        <input type="text" placeholder="创建人"
                            class="border rounded-lg px-4 py-2 w-48 outline-none focus:ring-2 focus:ring-indigo-500">
                        <!-- 手机号搜索框 -->
                        <input type="date" placeholder="发起时间"
                            class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500">
                        <span class="mx-2 text-gray-500">至</span>
                        <input type="date"
                            class="border rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-indigo-500">
                        <button
                            class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                        <button
                            class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>

                    </div>

                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table id="template-table" class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>模板名称</th>
                                    <th>创建人</th>
                                    <th>模板内容(预览)</th>
                                    <th>创建时间</th>
                                    <th>最后修改时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="template-name font-medium text-gray-800">标准委托服务协议 V3</td>
                                    <td class="template-creator">admin</td>
                                    <td class="template-content-preview"
                                        title="甲方 {{客户姓名}} (身份证号: {{客户身份证}}) 委托乙方进行数字资产管理..."><span
                                            class="hidden template-full-content">
                                            <h3>委托服务协议</h3>
                                            <p>甲方：<strong>{{客户姓名}}</strong> (身份证号: {{客户身份证}})</p>
                                            <p>乙方：币联CoinLink平台</p>
                                            <p>...</p>
                                            <p>委托金额为 <strong>{{委托金额}} USDT</strong>，分红比例为 <strong>{{分红比例}}</strong>。</p>
                                            <p>委托周期：{{委托周期}}</p>
                                        </span>甲方 {{客户姓名}} (身份证号: {{客户身份证}}) 委托乙方进行数字资产管理...</td>
                                    <td>2023-01-15</td>
                                    <td>2023-09-15</td>
                                    <td class="space-x-4"><button onclick="openTemplateEditor(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-blue-600 hover:underline">预览</button><button
                                            class="text-red-600 hover:underline">删除</button></td>
                                </tr>
                                <tr>
                                    <td class="template-name font-medium text-gray-800">高风险策略协议 V1</td>
                                    <td class="template-creator">risk_manager</td>
                                    <td class="template-content-preview" title="本协议适用于高风险偏好的客户 {{客户姓名}}，您确认已知晓相关风险...">
                                        <span class="hidden template-full-content">
                                            <h3>高风险策略服务协议</h3>
                                            <p>客户：<strong>{{客户姓名}}</strong></p>
                                            <p>...</p>
                                            <p>委托周期：{{委托周期}}</p>
                                            <p><em>请注意，高风险策略可能导致本金亏损。</em></p>
                                        </span>本协议适用于高风险偏好的客户 {{客户姓名}}，您确认已知晓相关风险...
                                    </td>
                                    <td>2023-05-20</td>
                                    <td>2023-08-01</td>
                                    <td class="space-x-4"><button onclick="openTemplateEditor(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-blue-600 hover:underline">预览</button><button
                                            class="text-red-600 hover:underline">删除</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ========== END: CONTRACT MANAGEMENT REFACTORED ========== -->

                <div id="settle-overview" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">平台收益总览</h1>
                    <div class="mt-6 flex items-center justify-between bg-white p-4 rounded-xl shadow-md">
                        <div class="flex items-center space-x-2"><label class="font-medium">选择周期:</label><input
                                type="month" value="2023-10" class="border rounded-lg px-4 py-2"></div><button
                            class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 flex items-center"><i
                                data-lucide="download" class="mr-2 h-5 w-5"></i>导出财务报告</button>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mt-6">
                        <div class="bg-white p-4 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">总收入</p>
                            <p class="text-2xl font-bold text-green-600">$85k</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">总支出</p>
                            <p class="text-2xl font-bold text-red-600">$25k</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">净利润</p>
                            <p class="text-2xl font-bold text-gray-800">$60k</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">总流水(AUM)</p>
                            <p class="text-2xl font-bold text-gray-800">$1.28M</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">客户总盈利</p>
                            <p class="text-2xl font-bold text-gray-800">$284k</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl shadow-md">
                            <p class="text-sm font-medium text-gray-500">委托客户数</p>
                            <p class="text-2xl font-bold text-gray-800">156</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-lg font-semibold text-gray-700 mb-4">收支与利润趋势图</h2>
                            <div style="height: 300px;"><canvas id="profitTrendChart"></canvas></div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-lg font-semibold text-gray-700 mb-4">收入来源分析 (按操盘手)</h2>
                            <div style="height: 300px;"><canvas id="revenueSourceChart"></canvas></div>
                        </div>
                    </div>
                </div>
                <!-- ========== PAGE: 待发送账单列表 ========== -->
                <div id="settle-customer-tosend" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">待发送账单列表</h1>
                    <!-- 筛选区 --><!-- ========== 推荐方案: 12列网格系统 ========== -->
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <!-- 1. 将总列数改为12 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-12 gap-4 items-end">                           
                            <!-- 2. 为每个元素分配列数 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="合同编号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <!-- 客户姓名：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="客户姓名" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 客户手机号：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="客户手机号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 日期范围：占据4列，保持了足够的宽度 -->
                            <div class="xl:col-span-4">
                                <div class="flex items-center mt-1">
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>                           
                            <!-- 按钮：占据剩下的2列 -->
                            <div class="flex justify-start space-x-2 xl:col-span-2">
                                <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>

                    <!-- 列表区 -->
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>合同编号</th>
                                    <th>客户姓名</th>
                                    <th>客户手机号码</th>                                    
                                    <th>操盘手姓名</th>
                                    <th>结算周期</th>                                  
                                    <th>本期总收益(USDT)</th>
                                    <th>本期应付管理费(USDT)</th>
                                    <th>生成时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 示例记录 1 -->
                                <tr class="bg-blue-50">
                                    <td>CON-2024-05-101</td>
                                    <td>李明 </td>
                                    <td>138****8888</td>                                    
                                    <td>李锋</td>
                                    <td>2025/03/01 - 2025/03/31</td>                                 
                                    <td class="text-green-600 font-semibold">+1,500.00</td>
                                    <td class="font-bold">450.00</td>
                                    <td>2025-03-31 00:00</td>
                                    <td class="space-x-2">
                                        <!-- 核心操作：发送账单 -->
                                        <button onclick="showModal('sendBillConfirmModal')" class="text-indigo-600 hover:underline font-semibold">发送账单</button>
                                        <button onclick="openBillDetailModal()" class="text-gray-600 hover:underline">详情</button>
                                    </td>
                                </tr>
                                <!-- 示例记录 2 -->
                                <tr class="bg-blue-50">
                                    <td>CON-2024-05-104</td>
                                    <td>陈红</td>
                                    <td>135****5566</td>                                    
                                    <td>陈明</td>
                                    <td>2025/03/01 - 2025/03/31</td>                                   
                                    <td class="text-green-600 font-semibold">+3,200.00</td>
                                    <td class="font-bold">960.00</td>
                                    <td>2025-03-31 00:00</td>
                                    <td class="space-x-2">
                                        <button onclick="showModal('sendBillConfirmModal')" class="text-indigo-600 hover:underline font-semibold">发送账单</button>
                                        <button onclick="openBillDetailModal()" class="text-gray-600 hover:underline">详情</button>
                                    </td>
                                </tr>
                                <!-- 更多“待发送”状态的记录... -->
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== PAGE: 客户收益管理 - 待收款账单列表 ========== -->
                <div id="settle-customer-topay" class="page">
                    <!-- 标题已更新，与三级菜单保持一致 -->
                    <h1 class="text-2xl font-bold text-gray-800">待收款账单列表</h1>
                    <!-- 筛选区 --><!-- ========== 推荐方案: 12列网格系统 ========== -->
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <!-- 1. 将总列数改为12 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-12 gap-4 items-end">                           
                            <!-- 2. 为每个元素分配列数 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="合同编号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <!-- 客户姓名：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="客户姓名" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 客户手机号：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="客户手机号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 日期范围：占据4列，保持了足够的宽度 -->
                            <div class="xl:col-span-4">
                                <div class="flex items-center mt-1">
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>                           
                            <!-- 按钮：占据剩下的2列 -->
                            <div class="flex justify-start space-x-2 xl:col-span-2">
                                <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>

                    <!-- 列表区 -->
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>合同编号</th>
                                    <th>客户姓名</th>
                                    <th>客户手机号码</th>                                    
                                    <th>操盘手姓名</th>
                                    <th>结算周期</th>                                  
                                    <th>本期应付管理费(USDT)</th>
                                    <th>发送时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 示例记录 1 -->
                                <tr class="bg-yellow-50">
                                    <td>CON-2024-05-102</td>
                                    <td>王芳</td>
                                    <td>139****1234</td>                                    
                                    <td>王建</td>
                                    <td>2025/03/01 - 2025/03/31</td>                                   
                                    <td class="font-bold">240.00</td>
                                    <td>2025-04-01 10:15</td>
                                    <td class="space-x-2">
                                        <!-- 核心操作：收款核销 -->
                                        <button onclick="openVerificationModal()" class="text-purple-600 hover:underline font-semibold">收款核销</button>
                                        <button onclick="openBillDetailModal()" class="text-gray-600 hover:underline">详情</button>
                                    </td>
                                </tr>
                                <!-- 示例记录 2 -->
                                <tr class="bg-yellow-50">
                                    <td>CON-2024-05-105</td>
                                    <td>刘宇</td>
                                    <td>186****1122</td>                                   
                                    <td>刘锋</td>
                                    <td>2025/03/01 - 2025/03/31</td>      
                                    <td class="font-bold">1,800.00</td>
                                    <td>2025-04-01 10:18</td>
                                    <td class="space-x-2">
                                        <button onclick="openVerificationModal()" class="text-purple-600 hover:underline font-semibold">收款核销</button>
                                        <button onclick="openBillDetailModal()" class="text-gray-600 hover:underline">详情</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ========== PAGE: 客户收益管理 - 已收款账单列表 ========== -->
                <div id="settle-customer-paid" class="page">
                    <!-- 标题与三级菜单保持一致 -->
                    <h1 class="text-2xl font-bold text-gray-800">已收款账单列表</h1>
                    <!-- 筛选区 --><!-- ========== 推荐方案: 12列网格系统 ========== -->
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <!-- 1. 将总列数改为12 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-12 gap-4 items-end">                           
                            <!-- 2. 为每个元素分配列数 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="合同编号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <!-- 客户姓名：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="客户姓名" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 客户手机号：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="客户手机号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 日期范围：占据4列，保持了足够的宽度 -->
                            <div class="xl:col-span-4">
                                <div class="flex items-center mt-1">
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>                           
                            <!-- 按钮：占据剩下的2列 -->
                            <div class="flex justify-start space-x-2 xl:col-span-2">
                                <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>                    

                    <!-- 列表区 -->
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>合同编号</th>
                                    <th>客户姓名</th>
                                    <th>客户手机号码</th>                                    
                                    <th>结算周期</th>
                                    <th>本期总收益(USDT)</th>                                                                     
                                    <th>本期实付管理费(USDT)</th>
                                    <th>完成时间</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 示例记录 1: 已支付 -->
                                <tr>
                                    <td>CON-2024-04-088</td>
                                    <td>赵磊</td>
                                    <td>137****5678</td>                                    
                                    <td>2025/03/01 - 2025/03/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="font-bold">630.00</td>
                                    <td>2025-04-03 11:30</td>
                                </tr>
                                <!-- 示例记录 3: 另一个已支付 -->
                                <tr>
                                    <td>CON-2024-04-088</td>
                                    <td>赵磊</td>
                                    <td>137****5678</td>                                    
                                    <td>2025/03/01 - 2025/03/31</td>
                                    <td class="text-green-600 font-semibold">+1,500</td>
                                    <td class="font-bold">500</td>
                                    <td>2025-10-05 00:00</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <!-- 分页组件 (在记录多的查询页面非常重要) -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 157 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">3</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">16</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ========== PAGE: 操盘手收益管理 - 待审核账单列表 ========== -->
                <div id="settle-trader-approval" class="page">
                    <!-- 标题与三级菜单保持一致 -->
                    <h1 class="text-2xl font-bold text-gray-800">待审核账单列表</h1>
                    <!-- 筛选区 -->
                    <!-- 筛选区 --><!-- ========== 推荐方案: 12列网格系统 ========== -->
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <!-- 1. 将总列数改为12 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-12 gap-4 items-end">                           
                            <!-- 2. 为每个元素分配列数 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="合同编号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <!-- 操盘手姓名：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="操盘手姓名" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 操盘手手机号：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="操盘手手机号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 日期范围：占据4列，保持了足够的宽度 -->
                            <div class="xl:col-span-4">
                                <div class="flex items-center mt-1">
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>                           
                            <!-- 按钮：占据剩下的2列 -->
                            <div class="flex justify-start space-x-2 xl:col-span-2">
                                <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>                       

                    <!-- 列表区 -->
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>合同编号</th>
                                    <th>操盘手姓名</th>
                                    <th>操盘手手机号码</th>
                                    <th>公司名称</th>
                                    <th>结算周期</th>
                                    <th>本期总收益(USDT)</th> 
                                    <th>本期实收管理费(USDT)</th>                                                                                                         
                                    <th>本期应付管理费(USDT)</th>
                                    <th>付款信息</th>                                                                        
                                    <th>申请时间</th>
                                    <th>申请人</th>                                    
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 示例记录 1: 待审核 -->
                                <tr class="bg-purple-50">
                                    <td>CON-2024-04-088</td>
                                    <td>李娜</td>
                                    <td>137****5678</td> 
                                    <td>新火科技</td> 
                                    <td>2025/03/01 - 2025/6/30</td>  
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">+630.00</td>                                    
                                    <td class="font-bold">420.00</td>
                                    <td title="TRC20: TPo1x2e3f4g5h6j7k8L9m0N1p2q3R4s5T6u7V8w9X">
                                        TRC20: TPo1x2...w9X 
                                    </td>
                                    <td>2025/10/10  12：35</td>  
                                    <td>operator_wang</td>
                                    <td class="space-x-2">
                                        <!-- 核心操作：审核 -->
                                        <button class="text-indigo-600 hover:underline font-semibold">通过</button>
                                        <button class="text-indigo-600 hover:underline font-semibold">拒绝</button>    
                                    </td>
                                </tr>
                                <!-- 示例记录 2: 待审核 -->
                                <tr class="bg-purple-50">
                                    <td>CON-2024-04-088</td>
                                    <td>张伟</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td> 
                                    <td>2025/03/01 - 2025/6/30</td>  
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">+630.00</td>                                    
                                    <td class="font-bold">420.00</td>
                                    <td title="TRC20: TPo1x2e3f4g5h6j7k8L9m0N1p2q3R4s5T6u7V8w9X">
                                        TRC20: TPo1x2...w9X 
                                    </td>
                                    <td>2025/10/10  12：35</td>  
                                    <td>operator_wang</td>
                                    <td class="space-x-2">
                                        <button class="text-indigo-600 hover:underline font-semibold">通过</button>
                                        <button class="text-indigo-600 hover:underline font-semibold">拒绝</button>                                        
                                    </td>
                                </tr>                       
                                </tr>
                            </tbody>
                        </table>
                         <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== PAGE: 操盘手收益管理 - 待付款账单列表 ========== -->
                <div id="settle-trader-topay" class="page">
                    <!-- 标题与三级菜单保持一致 -->
                    <h1 class="text-2xl font-bold text-gray-800">待付款账单列表</h1>
                    <!-- 筛选区 --><!-- ========== 推荐方案: 12列网格系统 ========== -->
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <!-- 1. 将总列数改为12 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-12 gap-4 items-end">                           
                            <!-- 2. 为每个元素分配列数 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="合同编号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <!-- 操盘手姓名：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="操盘手姓名" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 操盘手手机号：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="操盘手手机号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 日期范围：占据4列，保持了足够的宽度 -->
                            <div class="xl:col-span-4">
                                <div class="flex items-center mt-1">
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>                           
                            <!-- 按钮：占据剩下的2列 -->
                            <div class="flex justify-start space-x-2 xl:col-span-2">
                                <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>   

                    <!-- 列表区 -->
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>合同编号</th>
                                    <th>操盘手姓名</th>
                                    <th>操盘手手机号码</th>
                                    <th>公司名称</th>
                                    <th>结算周期</th>
                                    <th>本期总收益(USDT)</th>
                                    <th>本期实收管理费(USDT)</th>                                                                                                             
                                    <th>本期应付管理费(USDT)</th>      
                                    <th>收款信息</th>      
                                    <th>申请时间</th>
                                    <th>申请人</th>                                    
                                    <th>审核时间</th> 
                                    <th>审核人</th>                                                                
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 示例记录 1 -->
                                <tr class="bg-orange-50">
                                    <td>CON-2024-04-088</td>
                                    <td>王强</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td>                                      
                                    <td>2025/01/01 - 2025/12/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">630.00</td>                                    
                                    <td class="font-bold">420.00</td>
                                    <td title="TRC20: TPo1x2e3f4g5h6j7k8L9m0N1p2q3R4s5T6u7V8w9X">
                                        TRC20: TPo1x2...w9X 
                                        <i data-lucide="copy" class="inline-block h-4 w-4 text-gray-400 cursor-pointer" title="点击复制地址"></i>
                                    </td>
                                    <td>2025/10/10  12：35</td>  
                                    <th>operator_wang</th>
                                    <td>2025/10/12  12：35</td>                                      
                                    <td>operator_li</td>

                                    <td class="space-x-2">
                                        <!-- 核心操作：确认付款 -->
                                        <button onclick="showModal('paymentConfirmModal')" class="text-indigo-600 hover:underline font-semibold">确认付款</button>
                                    </td>
                                </tr>
                                <!-- 示例记录 2 -->
                                <tr class="bg-orange-50">
                                    <td>CON-2024-04-088</td>
                                    <td>张伟</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td>                                      
                                    <td>2025/01/01 - 2025/12/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">630.00</td>
                                    <td class="text-green-600 font-semibold">420.00</td>                                         
                                    <td title="TRC20: TPo1x2e3f4g5h6j7k8L9m0N1p2q3R4s5T6u7V8w9X">
                                        TRC20: TPo1x2...w9X 
                                        <i data-lucide="copy" class="inline-block h-4 w-4 text-gray-400 cursor-pointer" title="点击复制地址"></i>
                                    </td>
                                    <td>2025/10/10  12：35</td>  
                                    <th>operator_wang</th>
                                    <td>2025/10/12  12：35</td>                                      
                                    <td>operator_li</td>
                                    <td class="space-x-2">
                                        <!-- 核心操作：确认付款 -->
                                        <button onclick="showModal('paymentConfirmModal')" class="text-indigo-600 hover:underline font-semibold">确认付款</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== PAGE: 操盘手收益管理 - 已付款账单列表 ========== -->
                <div id="settle-trader-paid" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">已付款账单列表</h1>
                     <!-- 筛选区 --><!-- ========== 推荐方案: 12列网格系统 ========== -->
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <!-- 1. 将总列数改为12 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-12 gap-4 items-end">                           
                            <!-- 2. 为每个元素分配列数 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="合同编号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <!-- 操盘手姓名：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="操盘手姓名" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 客户手机号：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="操盘手手机号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 日期范围：占据4列，保持了足够的宽度 -->
                            <div class="xl:col-span-4">
                                <div class="flex items-center mt-1">
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>                           
                            <!-- 按钮：占据剩下的2列 -->
                            <div class="flex justify-start space-x-2 xl:col-span-2">
                                <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>   

                    <!-- 列表区 -->
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>合同编号</th>
                                    <th>操盘手姓名</th>
                                    <th>操盘手手机号码</th>
                                    <th>公司名称</th>
                                    <th>结算周期</th>
                                    <th>本期总收益(USDT)</th>
                                    <th>本期实收管理费(USDT)</th>                                                                                                             
                                    <th>本期已付管理费(USDT)</th>    
                                    <th>付款凭证/TxID</th>   
                                    <th>申请时间</th>
                                    <th>申请人</th>    
                                    <th>审核时间</th>     
                                    <th>审核人</th>                                                                           
                                    <th>付款完成时间</th> 
                                    <th>付款人</th>                                                                
                                    <th>备注</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 示例记录 1: 已付款 -->
                                <tr>
                                    <td>CON-2024-04-088</td>
                                    <td>张伟</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td>                                      
                                    <td>2025/01/01 - 2025/12/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">630.00</td>                                    
                                    <td class="font-bold">420.00</td>
                                    <td class="font-mono text-xs truncate" title="0xabc...def">
                                        <a href="#" class="text-blue-600 hover:underline">0xabc...def</a>
                                    </td>
                                    <td>2025/10/10  12：35</td>  
                                    <th>operator_wang</th>
                                    <td>2025/10/10  12:35</td>  
                                    <td>operator_chen</td>   
                                    <td>2025/10/12  12:35</td>                                                                         
                                    <td>finance_wang</td>  
                                    <td>-</td>
                                </tr>
                                <!-- 示例记录 2: 已付款 -->
                                <tr>
                                    <td>CON-2024-04-088</td>
                                    <td>李伟</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td>                                      
                                    <td>2025/01/01 - 2025/12/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">630.00</td>     
                                    <td class="font-bold">420.00</td>
                                    <td class="font-mono text-xs truncate" title="0xabc...def">
                                        <a href="#" class="text-blue-600 hover:underline">0xabc...def</a>
                                    </td>
                                    <td>2025/10/10  12：35</td>  
                                    <th>operator_wang</th>
                                    <td>2025/10/10  12:35</td>  
                                    <td>operator_chen</td>   
                                    <td>2025/10/12  12:35</td>                                                                         
                                    <td>finance_wang</td>  
                                    <td>-</td>
                                </tr>
                                <!-- 示例记录 3: 已付款 -->
                                <tr>
                                    <td>CON-2024-04-088</td>
                                    <td>梁伟</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td>                                      
                                    <td>2025/01/01 - 2025/12/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">630.00</td>
                                    <td class="font-bold">420.00</td>
                                    <td class="font-mono text-xs truncate" title="0xabc...def">
                                        <a href="#" class="text-blue-600 hover:underline">0xabc...def</a>
                                    </td>
                                    <td>2025/10/10  12：35</td>  
                                    <th>operator_wang</th>
                                    <td>2025/10/10  12:35</td>  
                                    <td>operator_chen</td>   
                                    <td>2025/10/12  12:35</td>                                                                         
                                    <td>finance_wang</td>  
                                    <td>-</td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>               
                <div id="settle-trader-portal" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">待结算账单列表</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <!-- 1. 将总列数改为12 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-12 gap-4 items-end">                           
                            <!-- 2. 为每个元素分配列数 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="合同编号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <!-- 操盘手姓名：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="操盘手姓名" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 客户手机号：占据2列 -->
                            <div class="xl:col-span-2">
                                <input type="text" placeholder="操盘手手机号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>                            
                            <!-- 日期范围：占据4列，保持了足够的宽度 -->
                            <div class="xl:col-span-4">
                                <div class="flex items-center mt-1">
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="date" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>                           
                            <!-- 按钮：占据剩下的2列 -->
                            <div class="flex justify-start space-x-2 xl:col-span-2">
                                <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>   

                    <!-- 列表区 -->
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>合同编号</th>
                                    <th>操盘手姓名</th>
                                    <th>操盘手手机号码</th>
                                    <th>公司名称</th>                                   
                                    <th>结算周期</th>
                                    <th>本期总收益(USDT)</th>
                                    <th>本期实收管理费(USDT)</th>                                                                                                         
                                    <th>本期应付管理费(USDT)</th>   
                                    <th>付款信息</th>                                       
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 示例记录 1: 已付款 -->
                                <tr>
                                    <td>CON-2024-04-088</td>
                                    <td>张伟</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td>                                      
                                    <td>2025/03/01 - 2025/06/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">+630.00</td>                                    
                                    <td class="font-bold">420.00</td>
                                    <td class="font-mono text-xs truncate" title="0xabc...def">
                                        <a href="#" class="text-blue-600 hover:underline">0xabc...def</a>
                                    </td>
                                    <td class="space-x-2">
                                        <!-- 核心操作：申请结算 -->
                                        <button onclick="showModal('sendBillConfirmModall')" class="text-indigo-600 hover:underline font-semibold">结算</button>
                                        <button onclick="openBillDetailModall()" class="text-gray-600 hover:underline">详情</button>
                                    </td>
                                </tr>
                                <!-- 示例记录 2: 已驳回 -->
                                <tr>
                                    <td>CON-2024-04-088</td>
                                    <td>李伟</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td>                                      
                                    <td>2025/03/01 - 2025/06/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">+630.00</td>                                    
                                    <td class="font-bold">420.00</td>
                                    <td class="font-mono text-xs truncate" title="0xabc...def">
                                        <a href="#" class="text-blue-600 hover:underline">0xabc...def</a>
                                    </td>
                                    <td class="space-x-2">
                                        <!-- 核心操作：申请结算 -->
                                        <button onclick="showModal('sendBillConfirmModal')" class="text-indigo-600 hover:underline font-semibold">结算</button>
                                        <button onclick="openBillDetailModall()" class="text-gray-600 hover:underline">详情</button>
                                    </td>
                                </tr>
                                <!-- 示例记录 3: 已付款 -->
                                <tr>
                                    <td>CON-2024-04-088</td>
                                    <td>梁伟</td>
                                    <td>137****5678</td>  
                                    <td>新火科技</td>                                      
                                    <td>2025/03/01 - 2025/06/31</td>
                                    <td class="text-green-600 font-semibold">+2,100.00</td>
                                    <td class="text-green-600 font-semibold">+630.00</td>                                    
                                    <td class="font-bold">420.00</td>
                                    <td class="font-mono text-xs truncate" title="0xabc...def">
                                        <a href="#" class="text-blue-600 hover:underline">0xabc...def</a>
                                    </td>
                                    <td class="space-x-2">
                                        <!-- 核心操作：申请结算 -->
                                        <button onclick="showModal('sendBillConfirmModal')" class="text-indigo-600 hover:underline font-semibold">结算</button>
                                        <button onclick="openBillDetailModall()" class="text-gray-600 hover:underline">详情</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>    


                <div id="settings-accounts" class="page">
                    <div class="flex justify-start  gap-4 items-center">
                        <!-- 这是你的标题 -->
                        <h1 class="text-2xl font-bold text-gray-800">账号管理</h1>
                        <!-- 步骤2: 把“新增”按钮从下面的白色面板中“剪切”到这里 -->
                        <button onclick="openAccountModal(false)"
                            class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 flex items-center whitespace-nowrap">
                            新增
                        </button>
                    </div>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <!-- 使用 Flexbox 布局 -->
                        <!-- justify-between: 两端对齐，中间留空 -->
                        <!-- items-center: 垂直居中对齐 -->
                        <!-- gap-4: 子元素之间的间距 -->
                        <div class="flex justify-start items-center gap-4">

                            <!-- 左侧：所有的筛选条件 -->
                            <div class="flex items-center gap-4">
                                <input type="text" placeholder="姓名" class="border rounded-lg px-3 py-2 w-full">
                                <input type="text" placeholder="手机号码" class="border rounded-lg px-3 py-2 w-full">
                                <input type="text" placeholder="账号" class="border rounded-lg px-3 py-2 w-full">
                                <select class="border rounded-lg px-3 py-2 w-full">
                                    <option>所有角色</option>
                                    <option>超级管理员</option>
                                    <option>运营人员</option>
                                    <option>操盘手</option>
                                </select>
                                <select class="border rounded-lg px-3 py-2 w-full">
                                    <option>所有状态</option>
                                    <option>启用</option>
                                    <option>未启用</option>
                                </select>
                            </div>
                            <!-- 右侧：所有的操作按钮 -->
                            <div class="flex items-center gap-2">
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>

                            </div>

                        </div>
                    </div>

                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>账号</th>
                                    <th>姓名</th>
                                    <th>手机号码</th>
                                    <th>公司</th>
                                    <th>角色</th>
                                    <th>状态</th>
                                    <th>最近修改人</th>
                                    <th>创建时间</th>
                                    <th>最近修改时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>superadmin</td>
                                    <td>陈浩</td>
                                    <td>13800138000</td>
                                    <td>-</td>
                                    <td>超级管理员</td>
                                    <td><span class="badge badge-green">启用</span></td>
                                    <td>-</td>
                                    <td>2023-01-01 10:00</td>
                                    <td>-</td>
                                    <td class="space-x-4"><button onclick="openAccountModal(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-red-600 hover:underline">重置密码</button></td>
                                </tr>
                                <tr>
                                    <td>operator_li</td>
                                    <td>李静</td>
                                    <td>13912345678</td>
                                    <td>-</td>
                                    <td>运营人员</td>
                                    <td><span class="badge badge-green">启用</span></td>
                                    <td>superadmin</td>
                                    <td>2023-02-15 14:30</td>
                                    <td>2024-05-10 09:00</td>
                                    <td class="space-x-4"><button onclick="openAccountModal(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-red-600 hover:underline">重置密码</button></td>
                                </tr>
                                <tr>
                                    <td>trader_zhangwei</td>
                                    <td>张伟</td>
                                    <td>13811112222</td>
                                    <td>-</td>
                                    <td>操盘手</td>
                                    <td><span class="badge badge-green">启用</span></td>
                                    <td>superadmin</td>
                                    <td>2023-03-20 11:00</td>
                                    <td>2024-01-20 16:00</td>
                                    <td class="space-x-4"><button onclick="openAccountModal(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-red-600 hover:underline">重置密码</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="settings-roles-mgmt" class="page">
                    <div class="flex justify-start  gap-4 items-center">
                        <!-- 这是你的标题 -->
                        <h1 class="text-2xl font-bold text-gray-800">角色管理</h1>
                        <!-- 步骤2: 把“新增”按钮从下面的白色面板中“剪切”到这里 -->
                        <button onclick="openRoleModal('add')"
                            class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 flex items-center">新增</button>
                    </div>
                    <div class="mt-4 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-4">
                                <input type="text" placeholder="角色名称" class="border rounded-lg px-3 py-2 w-64">
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>角色名称</th>
                                    <th>描述</th>
                                    <th>最近修改人</th>
                                    <th>创建时间</th>
                                    <th>最近修改时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="font-medium">超级管理员</td>
                                    <td>拥有系统所有权限，负责系统的维护与管理。</td>
                                    <td>superadmin</td>
                                    <td>2023-01-01 10:00</td>
                                    <td>-</td>
                                    <td class="space-x-4"><button onclick="openRoleModal('view', this)"
                                            class="text-blue-600 hover:underline">详情</button><button
                                            onclick="openRoleModal('edit', this)"
                                            class="text-indigo-600 hover:underline">编辑</button></td>
                                </tr>
                                <tr>
                                    <td class="font-medium">运营人员</td>
                                    <td>负责日常运营，如客户管理、合同审核、结算处理等。</td>
                                    <td>superadmin</td>
                                    <td>2023-01-01 10:00</td>
                                    <td>-</td>
                                    <td class="space-x-4"><button onclick="openRoleModal('view', this)"
                                            class="text-blue-600 hover:underline">详情</button><button
                                            onclick="openRoleModal('edit', this)"
                                            class="text-indigo-600 hover:underline">编辑</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="settings-sms-channels" class="page">
                    <div class="flex justify-start  gap-4 items-center">
                        <h1 class="text-2xl font-bold text-gray-800">短信渠道配置</h1>
                        <button onclick="openSmsChannelModal(false)"
                            class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 flex items-center">新增</button>
                    </div>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex justify-start items-center">
                            <div class="flex items-center gap-4">
                                <input type="text" placeholder="渠道名称" class="border rounded-lg px-3 py-2 w-64">
                                <select class="border rounded-lg px-3 py-2 w-48">
                                    <option>全部状态</option>
                                    <option>启用</option>
                                    <option>关闭</option>
                                </select>
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>


                        </div>
                    </div>
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>渠道类型</th>
                                    <th>渠道名称</th>
                                    <th>AccessKey</th>
                                    <th>AccessSecret</th>
                                    <th>SenderID</th>
                                    <th>状态</th>
                                    <th>修改人</th>
                                    <th>修改时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="badge badge-blue">验证码短信渠道</span></td>
                                    <td class="font-medium">阿里云短信</td>
                                    <td>LTAI5t...fG7y</td>
                                    <td>
                                        <div class="table-description" title="Ps8k...oP1z">**********</div>
                                    </td>
                                    <td>CoinLink</td>
                                    <td><span class="badge badge-green">启用</span></td>
                                    <td>superadmin</td>
                                    <td>2024-05-20 11:30:15</td>
                                    <td class="space-x-4"><button onclick="openSmsChannelModal(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-red-600 hover:underline">删除</button></td>
                                </tr>
                                <tr>
                                    <td><span class="badge badge-purple">通知类短信渠道</span></td>
                                    <td class="font-medium">Twilio</td>
                                    <td>AC...3a2f</td>
                                    <td>
                                        <div class="table-description" title="Auth...Token">**********</div>
                                    </td>
                                    <td>+15017122661</td>
                                    <td><span class="badge badge-gray">关闭</span></td>
                                    <td>operator_li</td>
                                    <td>2024-03-11 09:00:00</td>
                                    <td class="space-x-4"><button onclick="openSmsChannelModal(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-red-600 hover:underline">删除</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="settings-sms-app" class="page">
                    <div class="flex justify-start  gap-4 items-center">
                        <h1 class="text-2xl font-bold text-gray-800">APP短信配置</h1>
                        <button onclick="openAppSmsModal(false)"
                            class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 flex items-center">新增</button>
                    </div>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex justify-start items-center">
                            <div class="flex items-center gap-4">
                                <input type="text" placeholder="短信名称" class="border rounded-lg px-3 py-2 w-64">
                                <select class="border rounded-lg px-3 py-2 w-48">
                                    <option>全部状态</option>
                                    <option>开启</option>
                                    <option>关闭</option>
                                </select>
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>

                        </div>
                    </div>
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>短信名称</th>
                                    <th>渠道类型</th>
                                    <th>发送方式</th>
                                    <th>模板内容</th>
                                    <th>状态</th>
                                    <th>修改人</th>
                                    <th>修改时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="font-medium">注册登录</td>
                                    <td><span class="badge badge-blue">验证码短信渠道</span></td>
                                    <td>触发发送</td>
                                    <td class="table-content" title="【币联】您的验证码是{code}，5分钟内有效，请勿泄露。">
                                        【币联】您的验证码是{code}，5分钟内有效，请勿泄露。</td>
                                    <td><span class="badge badge-green">开启</span></td>
                                    <td>superadmin</td>
                                    <td>2024-05-18 10:00:00</td>
                                    <td class="space-x-4"><button onclick="openAppSmsModal(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-red-600 hover:underline">删除</button></td>
                                </tr>
                                <tr>
                                    <td class="font-medium">结算通知</td>
                                    <td><span class="badge badge-purple">通知类短信渠道</span></td>
                                    <td>定时发送</td>
                                    <td class="table-content" title="【币联】尊敬的{username}，您{month}月的收益结算账单已生成，请登录APP查看详情。">
                                        【币联】尊敬的{username}，您{month}月的收益结算账单已生成...</td>
                                    <td><span class="badge badge-green">开启</span></td>
                                    <td>operator_li</td>
                                    <td>2024-05-19 14:20:00</td>
                                    <td class="space-x-4"><button onclick="openAppSmsModal(true, this)"
                                            class="text-indigo-600 hover:underline">编辑</button><button
                                            class="text-red-600 hover:underline">删除</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="settings-content" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">消息管理</h1>
                    <div class="border-b border-gray-200 mt-6">
                        <nav class="flex space-x-4" aria-label="Tabs">
                            <button id="tab-btn-announcement" onclick="switchContentTab('announcement')"
                                class="tab-button active">公告管理</button>
                            <button id="tab-btn-push" onclick="switchContentTab('push')"
                                class="tab-button">推送消息</button>
                        </nav>
                    </div>

                    <div id="tab-pane-announcement" class="tab-pane active mt-6">
                        <div class="bg-white p-4 rounded-xl shadow-md">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center gap-4">
                                    <input type="text" placeholder="公告标题" class="border rounded-lg px-3 py-2 w-52">
                                    <select class="border rounded-lg px-3 py-2 w-40">
                                        <option>所有类型</option>
                                        <option>平台公告</option>
                                        <option>活动通知</option>
                                        <option>系统维护</option>
                                    </select>
                                    <select class="border rounded-lg px-3 py-2 w-40">
                                        <option>所有状态</option>
                                        <option>已发布</option>
                                        <option>待发布</option>
                                        <option>已下线</option>
                                        <option>草稿</option>
                                    </select>
                                    <button
                                        class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                    <button
                                        class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                                </div>
                                <button onclick="openAnnouncementModal(false)"
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 flex items-center"><i
                                        data-lucide="plus" class="h-5 w-5 mr-2"></i>发布新公告</button>
                            </div>
                        </div>
                        <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                            <table class="custom-table w-full">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>公告标题</th>
                                        <th>类型</th>
                                        <th>状态</th>
                                        <th>排序</th>
                                        <th>发布时间</th>
                                        <th>创建人</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>101</td>
                                        <td class="font-medium">关于2024年端午节休假安排的通知</td>
                                        <td><span class="badge badge-purple">平台公告</span></td>
                                        <td><span class="badge badge-green">已发布</span></td>
                                        <td>10</td>
                                        <td>2024-06-05 10:00</td>
                                        <td>运营A</td>
                                        <td class="space-x-4"><button onclick="openAnnouncementModal(true)"
                                                class="text-indigo-600 hover:underline">编辑</button><button
                                                class="text-red-600 hover:underline">下线</button></td>
                                    </tr>
                                    <tr>
                                        <td>100</td>
                                        <td class="font-medium">系统将于6月10日凌晨2-4点进行升级维护</td>
                                        <td><span class="badge badge-orange">系统维护</span></td>
                                        <td><span class="badge badge-yellow">待发布</span></td>
                                        <td>99</td>
                                        <td>2024-06-09 18:00</td>
                                        <td>技术部</td>
                                        <td class="space-x-4"><button onclick="openAnnouncementModal(true)"
                                                class="text-indigo-600 hover:underline">编辑</button><button
                                                class="text-blue-600 hover:underline">发布</button></td>
                                    </tr>
                                    <tr>
                                        <td>99</td>
                                        <td class="font-medium">五月交易大赛圆满结束，获奖名单公示</td>
                                        <td><span class="badge badge-cyan">活动通知</span></td>
                                        <td><span class="badge badge-gray">已下线</span></td>
                                        <td>5</td>
                                        <td>2024-06-01 12:00</td>
                                        <td>运营B</td>
                                        <td class="space-x-4"><button onclick="openAnnouncementModal(true)"
                                                class="text-indigo-600 hover:underline">编辑</button></td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- 分页组件 -->
                            <div class="flex items-center justify-between p-4 border-t">
                                <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                                <div class="flex space-x-1">
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                    <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                    <span>...</span>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                    <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="tab-pane-push" class="tab-pane mt-6">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-md">
                                <h3 class="text-xl font-bold text-gray-800 mb-6 border-b pb-4">创建新的推送</h3>
                                <form class="space-y-4">
                                    <div><label class="font-medium text-sm">推送标题</label><input type="text"
                                            placeholder="20字以内" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                                    <div><label class="font-medium text-sm">推送内容</label><textarea rows="3"
                                            placeholder="40字以内"
                                            class="border rounded-lg px-4 py-2 w-full mt-1"></textarea></div>
                                    <div><label class="font-medium text-sm">落地页链接 (选填)</label><input type="url"
                                            placeholder="https://..." class="border rounded-lg px-4 py-2 w-full mt-1">
                                    </div>
                                    <div>
                                        <label class="font-medium text-sm">目标用户</label>
                                        <div class="flex items-center space-x-6 mt-2">
                                            <label class="flex items-center"><input type="radio" name="pushTarget"
                                                    value="all" checked
                                                    class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                                <span class="ml-2">全部用户</span></label>
                                            <label class="flex items-center"><input type="radio" name="pushTarget"
                                                    value="specific"
                                                    class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                                <span class="ml-2">特定用户</span></label>
                                        </div>
                                        <div id="specific-user-group" class="mt-2 hidden"><select multiple
                                                class="border rounded-lg px-4 py-2 w-full">
                                                <option>所有操盘手</option>
                                                <option>所有客户</option>
                                                <option>近30日有交易用户</option>
                                                <option>高净值用户(AUM > 10万)</option>
                                            </select></div>
                                    </div>
                                    <div>
                                        <label class="font-medium text-sm">发送时间</label>
                                        <div class="flex items-center space-x-6 mt-2">
                                            <label class="flex items-center"><input type="radio" name="pushTime"
                                                    value="now" checked
                                                    class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                                <span class="ml-2">立即发送</span></label>
                                            <label class="flex items-center"><input type="radio" name="pushTime"
                                                    value="scheduled"
                                                    class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                                <span class="ml-2">定时发送</span></label>
                                        </div>
                                        <div id="scheduled-time-group" class="mt-2 hidden"><input type="datetime-local"
                                                class="border rounded-lg px-4 py-2 w-full"></div>
                                    </div>
                                    <div class="pt-4"><button type="button"
                                            class="w-full bg-indigo-600 text-white px-4 py-3 rounded-lg font-semibold hover:bg-indigo-700">发送推送</button>
                                    </div>
                                </form>
                            </div>
                            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                                <h3 class="text-xl font-bold text-gray-800 mb-6 border-b pb-4">历史推送记录</h3>
                                <div class="overflow-x-auto">
                                    <table class="custom-table w-full">
                                        <thead>
                                            <tr>
                                                <th>发送时间</th>
                                                <th>标题</th>
                                                <th>内容</th>
                                                <th>目标用户</th>
                                                <th>状态</th>
                                                <th>操作人</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>2024-06-03 18:00</td>
                                                <td class="font-medium">新功能上线！</td>
                                                <td class="push-content-preview">策略广场功能已上线，快来发现顶尖操盘手！</td>
                                                <td>全部用户</td>
                                                <td><span class="badge badge-green">已发送</span></td>
                                                <td>运营A</td>
                                            </tr>
                                            <tr>
                                                <td>2024-05-20 10:00</td>
                                                <td class="font-medium">邀请好友，同享收益</td>
                                                <td class="push-content-preview">邀请好友加入币联，您可获得丰厚返佣奖励。</td>
                                                <td>近30日有交易用户</td>
                                                <td><span class="badge badge-green">已发送</span></td>
                                                <td>运营B</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="settings-app" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">APP配置</h1>
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>配置项</th>
                                    <th>内容概要</th>
                                    <th>修改人</th>
                                    <th>修改时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="font-medium">关于我们</td>
                                    <td class="table-content"
                                        title="币联是一个安全、透明、合规的资产增值服务平台，致力于为全球用户提供专业的数字资产管理方案。我们拥有顶尖的金融科技团队和严格的风控体系，确保客户资产安全与稳定增值。">
                                        币联是一个安全、透明、合规的资产增值服务平台....</td>
                                    <td>superadmin</td>
                                    <td>2024-01-10 10:00:00</td>
                                    <td class="space-x-4">
                                        <button onclick="openConfigModal('edit', 'about')"
                                            class="text-indigo-600 hover:underline">编辑</button>
                                        <button onclick="openConfigModal('view', 'about')"
                                            class="text-blue-600 hover:underline">查看</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="font-medium">联系我们</td>
                                    <td class="table-content" title="客服电话: 400-800-8888, 客服邮箱: support@coinlink.com">
                                        客服电话: 400-800-8888, 客服邮箱: support@coinlink.com</td>
                                    <td>superadmin</td>
                                    <td>2024-01-10 10:05:00</td>
                                    <td class="space-x-4">
                                        <button onclick="openConfigModal('edit', 'contact')"
                                            class="text-indigo-600 hover:underline">编辑</button>
                                        <button onclick="openConfigModal('view', 'contact')"
                                            class="text-blue-600 hover:underline">查看</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="font-medium">用户协议</td>
                                    <td class="table-content"
                                        title="<h1>第一条 总则</h1><p>1.1 本协议旨在明确用户在使用币联服务时的权利与义务...</p>">第一条 总则 1.1
                                        本协议旨在明确用户在使用币联服务时...</td>
                                    <td>legal_dept</td>
                                    <td>2024-04-15 16:30:00</td>
                                    <td class="space-x-4">
                                        <button onclick="openConfigModal('edit', 'userAgreement')"
                                            class="text-indigo-600 hover:underline">编辑</button>
                                        <button onclick="openConfigModal('view', 'userAgreement')"
                                            class="text-blue-600 hover:underline">查看</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="font-medium">隐私协议</td>
                                    <td class="table-content" title="<h1>引言</h1><p>我们非常重视您的个人信息和隐私保护...</p>">引言
                                        我们非常重视您的个人信息和隐私保护...</td>
                                    <td>legal_dept</td>
                                    <td>2024-04-15 16:35:00</td>
                                    <td class="space-x-4">
                                        <button onclick="openConfigModal('edit', 'privacyPolicy')"
                                            class="text-indigo-600 hover:underline">编辑</button>
                                        <button onclick="openConfigModal('view', 'privacyPolicy')"
                                            class="text-blue-600 hover:underline">查看</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="font-medium">活体阈值</td>
                                    <td class="table-content" title="活体识别接口的调用通过率标准">通过率：75%</td>
                                    <td>risk_manager</td>
                                    <td>2024-03-01 11:00:00</td>
                                    <td class="space-x-4">
                                        <button onclick="openConfigModal('edit', 'liveness')"
                                            class="text-indigo-600 hover:underline">编辑</button>
                                        <button onclick="openConfigModal('view', 'liveness')"
                                            class="text-blue-600 hover:underline">查看</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="font-medium">1:1阈值</td>
                                    <td class="table-content" title="人脸1:1比对接口的调用通过率标准">通过率：75%</td>
                                    <td>risk_manager</td>
                                    <td>2024-03-01 11:05:00</td>
                                    <td class="space-x-4">
                                        <button onclick="openConfigModal('edit', 'one_to_one')"
                                            class="text-indigo-600 hover:underline">编辑</button>
                                        <button onclick="openConfigModal('view', 'one_to_one')"
                                            class="text-blue-600 hover:underline">查看</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="font-medium">OCR阈值</td>
                                    <td class="table-content" title="OCR识别接口的单用户每日调用次数限制">单用户每日调用次数：10次</td>
                                    <td>risk_manager</td>
                                    <td>2024-03-01 11:10:00</td>
                                    <td class="space-x-4">
                                        <button onclick="openConfigModal('edit', 'ocr')"
                                            class="text-indigo-600 hover:underline">编辑</button>
                                        <button onclick="openConfigModal('view', 'ocr')"
                                            class="text-blue-600 hover:underline">查看</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="font-medium">电子签字配置</td>
                                    <td class="table-content" title="电子签名服务的单用户每日调用次数限制">单用户每日调用次数：10次</td>
                                    <td>risk_manager</td>
                                    <td>2024-03-01 11:15:00</td>
                                    <td class="space-x-4">
                                        <button onclick="openConfigModal('edit', 'esign')"
                                            class="text-indigo-600 hover:underline">编辑</button>
                                        <button onclick="openConfigModal('view', 'esign')"
                                            class="text-blue-600 hover:underline">查看</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="risk-monitor" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">异常交易监控</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-8 gap-4 items-end">
                            <div class="lg:col-span-3">
                                <label class="text-sm font-medium text-gray-700">警报时间</label>
                                <div class="flex items-center mt-1">
                                    <input type="datetime-local" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="datetime-local" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>
                            <div class="lg:col-span-1">
                                <label class="text-sm font-medium text-gray-700">涉及用户</label>
                                <input type="text" placeholder="用户ID" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <div class="lg:col-span-1">
                                <label class="text-sm font-medium text-gray-700">警报类型</label>
                                <select class="border rounded-lg px-3 py-2 w-full mt-1">
                                    <option>全部</option>
                                    <option>大额交易</option>
                                    <option>高频操作</option>
                                </select>
                            </div>
                            <div class="lg:col-span-1">
                                <label class="text-sm font-medium text-gray-700">风险等级</label>
                                <select class="border rounded-lg px-3 py-2 w-full mt-1">
                                    <option>全部</option>
                                    <option>高</option>
                                    <option>中</option>
                                    <option>低</option>
                                </select>
                            </div>
                            <div class="lg:col-span-1">
                                <label class="text-sm font-medium text-gray-700">状态</label>
                                <select class="border rounded-lg px-3 py-2 w-full mt-1">
                                    <option>全部</option>
                                    <option>待处理</option>
                                    <option>已处理</option>
                                </select>
                            </div>
                            <div class="lg:col-span-1 flex justify-start space-x-2">
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>警报ID</th>
                                    <th>时间</th>
                                    <th>警报类型</th>
                                    <th>涉及用户</th>
                                    <th>风险等级</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-red-50">
                                    <td>ALERT-0987</td>
                                    <td>2023-10-26 14:10</td>
                                    <td>大额交易</td>
                                    <td>1004</td>
                                    <td><span class="badge badge-red">高</span></td>
                                    <td><span class="badge badge-yellow">待处理</span></td>
                                    <td><a href="#" class="text-indigo-600 font-semibold hover:underline">查看并处理</a></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="risk-api" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">API Key监控</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="flex flex-wrap justify-between items-center gap-4">
                            <div class="flex items-center gap-4">
                                <input type="text" placeholder="客户ID" class="border rounded-lg px-3 py-2 w-52">
                                <select class="border rounded-lg px-3 py-2 w-48">
                                    <option>全部交易所</option>
                                    <option>Binance</option>
                                    <option>OKX</option>
                                </select>
                                <select class="border rounded-lg px-3 py-2 w-64">
                                    <option>提现权限状态</option>
                                    <option>已开启 (高风险!)</option>
                                    <option>未开启</option>
                                </select>
                            </div>
                            <div class="flex items-center gap-2">
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>客户ID</th>
                                    <th>交易所</th>
                                    <th>API Key</th>
                                    <th>交易权限</th>
                                    <th>提现权限状态</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-red-100 text-red-800 font-bold">
                                    <td>1024</td>
                                    <td>Binance</td>
                                    <td>mno...pqr</td>
                                    <td><span class="badge badge-green">已开启</span></td>
                                    <td><span class="badge badge-red">已开启 (高风险!)</span></td>
                                </tr>
                                <tr>
                                    <td>1001</td>
                                    <td>Binance</td>
                                    <td>bkC...4qE</td>
                                    <td><span class="badge badge-green">已开启</span></td>
                                    <td><span class="badge badge-green">未开启</span></td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="risk-logs" class="page">
                    <h1 class="text-2xl font-bold text-gray-800">操作日志</h1>
                    <div class="mt-6 bg-white p-4 rounded-xl shadow-md">
                        <div class="grid grid-cols-1 lg:grid-cols-7 gap-4 items-end">
                            <div class="lg:col-span-3">
                                <label class="text-sm font-medium text-gray-700">时间</label>
                                <div class="flex items-center mt-1">
                                    <input type="datetime-local" class="border rounded-lg px-3 py-2 w-full">
                                    <span class="mx-2 text-gray-500">-</span>
                                    <input type="datetime-local" class="border rounded-lg px-3 py-2 w-full">
                                </div>
                            </div>
                            <div class="lg:col-span-1">
                                <label class="text-sm font-medium text-gray-700">操作人</label>
                                <input type="text" placeholder="输入账号" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <div class="lg:col-span-1">
                                <label class="text-sm font-medium text-gray-700">操作模块</label>
                                <input type="text" placeholder="输入模块" class="border rounded-lg px-3 py-2 w-full mt-1">
                            </div>
                            <div class="lg:col-span-2 flex justify-start space-x-2">
                                <button
                                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">重置</button>
                                <button
                                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">搜索</button>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-white rounded-xl shadow-md overflow-x-auto">
                        <table class="custom-table w-full">
                            <thead>
                                <tr>
                                    <th>时间戳</th>
                                    <th>操作人</th>
                                    <th>IP地址</th>
                                    <th>操作模块</th>
                                    <th>操作行为</th>
                                    <th>详细信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023-10-26 15:00:12</td>
                                    <td>admin_01</td>
                                    <td>127.0.0.1</td>
                                    <td>客户管理</td>
                                    <td>编辑</td>
                                    <td>将客户#1002状态从[待审核]修改为[生效中]</td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- 分页组件 -->
                        <div class="flex items-center justify-between p-4 border-t">
                            <span class="text-sm text-gray-600">显示第 1 到 10 条，共 89 条记录</span>
                            <div class="flex space-x-1">
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100 disabled:opacity-50" disabled>上一页</button>
                                <button class="px-3 py-1 border rounded-lg bg-indigo-600 text-white">1</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                                <span>...</span>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">9</button>
                                <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- All Modals (Original, untouched) -->
    <div id="keyPasswordModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-sm">
            <h2 class="text-xl font-bold text-gray-800 mb-4">安全验证</h2>
            <p class="text-gray-600 mb-6 text-sm">为保护客户隐私，查看敏感信息需要验证您的操作密码。</p>
            <div>
                <label for="op-password" class="font-medium text-sm">操作密码</label>
                <input type="password" id="op-password" class="border rounded-lg px-4 py-2 w-full mt-1"
                    placeholder="请输入您的登录密码">
            </div>
            <div class="flex justify-end mt-8 space-x-3">
                <button onclick="hideModal('keyPasswordModal')"
                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button onclick="verifyAndShowKey()"
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认</button>
            </div>
        </div>
    </div>
    <div id="traderModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-2xl max-h-[90vh] flex flex-col">
            <h2 id="traderModalTitle" class="text-2xl font-bold text-gray-800 mb-6 flex-shrink-0">新增</h2>
            <div class="flex-grow modal-content-area pr-2">
                <form id="traderModalForm" class="space-y-4">
                    <!-- 改为竖向单列布局 -->
                    <div class="grid grid-cols-1 gap-4"> <!-- 关键修改：grid-cols-2 → grid-cols-1 -->
                        <!-- 原有字段（保持顺序，每项独占一行） -->
                        <div>
                            <label class="font-medium text-sm">姓名</label>
                            <input type="text" name="name" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <div>
                            <label class="font-medium text-sm">手机号码</label>
                            <input type="text" name="phone" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <div>
                            <label class="font-medium text-sm">身份证号码</label>
                            <input type="text" name="phone" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <div>
                            <label class="font-medium text-sm">公司名称 (如有)</label>
                            <input type="text" name="company" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <div>
                            <label class="font-medium text-sm">操盘手昵称</label>
                            <input type="text" name="nickname" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <div>
                            <label class="font-medium text-sm">交易风格</label>
                            <select name="style" class="border rounded-lg px-4 py-2 w-full mt-1">
                                <option>稳健型</option>
                                <option>平衡型</option>
                                <option>激进型</option>
                            </select>
                        </div>
                        <div>
                            <label class="font-medium text-sm">交易经验 (年)</label>
                            <input type="number" name="experience" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <div>
                            <label class="font-medium text-sm">起投资金 (USDT)</label>
                            <input type="number" name="min_investment" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <div>
                            <label class="font-medium text-sm">推荐排序</label>
                            <input type="number" name="sort" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <!-- 新增收款信息区域 -->
                        <div class="pt-4">
                            <label class="font-medium text-sm block mb-2">收款信息</label>
                            <input type="text" name="payment_account" placeholder="请输入收款账号/钱包地址"
                                class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                        <div>
                            <label class="font-medium text-sm">结算周期</label>
                            <select name="style" class="border rounded-lg px-4 py-2 w-full mt-1">
                                <option>3个月</option>
                                <option>6个月</option>
                                <option>12个月</option>
                            </select>
                        </div>
                        <div>
                            <label class="font-medium text-sm">管理费率(%)</label>
                            <input type="number" name="sort" class="border rounded-lg px-4 py-2 w-full mt-1">
                        </div>
                    </div>
                    <!-- 简介文本域（位置不变） -->
                    <div>
                        <label class="font-medium text-sm">简介 (策略/个人简介)</label>
                        <textarea name="bio" rows="4" class="border rounded-lg px-4 py-2 w-full mt-1"></textarea>
                    </div>
                    
                </form>
            </div>
            <div id="traderModalButtons" class="flex justify-end mt-8 flex-shrink-0 pt-4 border-t space-x-3">
                <button onclick="hideModal('traderModal')"
                    class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-400">取消</button>
                <button id="traderModalSaveBtn"
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">保存</button>
            </div>
        </div>
    </div>
    <div id="templateEditorModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-6xl h-full max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center p-4 border-b">
                <h2 id="templateEditorTitle" class="text-2xl font-bold text-gray-800">创建新模板</h2><button
                    onclick="hideModal('templateEditorModal')" class="text-gray-500 hover:text-gray-800"><i
                        data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <div class="flex-grow p-4 grid grid-cols-1 md:grid-cols-4 gap-6 modal-content-area">
                <div class="md:col-span-3 flex flex-col">
                    <div><label for="templateNameInput" class="font-medium text-sm text-gray-700">模板名称</label><input
                            type="text" id="templateNameInput" placeholder="例如：标准委托服务协议 V4"
                            class="border rounded-lg px-4 py-2 w-full mt-1 mb-4"></div>
                    <div class="flex-grow flex flex-col"><label
                            class="font-medium text-sm text-gray-700 mb-1">模板内容</label>
                        <div id="editor-container" class="bg-white border rounded-lg flex-grow"></div>
                    </div>
                </div>
                <div class="md:col-span-1 bg-gray-50 p-4 rounded-lg border h-full">
                    <h3 class="font-semibold text-gray-800 mb-4">可用变量</h3>
                    <p class="text-xs text-gray-500 mb-4">点击下方变量，可将其插入到编辑器光标位置。</p>
                    <div id="variable-tags-container" class="space-y-2"><span
                            class="variable-tag block">{{客户姓名}}</span><span
                            class="variable-tag block">{{客户身份证}}</span><span
                            class="variable-tag block">{{委托金额}}</span><span
                            class="variable-tag block">{{分红比例}}</span><span
                            class="variable-tag block">{{委托周期}}</span><span
                            class="variable-tag block">{{操盘手昵称}}</span><span
                            class="variable-tag block">{{合同编号}}</span><span class="variable-tag block">{{当前日期}}</span>
                    </div>
                </div>
            </div>
            <div class="flex justify-end p-4 border-t bg-gray-50"><button onclick="hideModal('templateEditorModal')"
                    class="bg-gray-200 text-gray-800 px-6 py-2 rounded-lg mr-2 font-semibold hover:bg-gray-300">取消</button><button
                    class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700">保存模板</button>
            </div>
        </div>
    </div>
    
    <div id="sendBillConfirmModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-lg text-center">
            <i data-lucide="send" class="mx-auto h-16 w-16 text-indigo-500 mb-4"></i>
            <h2 class="text-2xl font-bold text-gray-800 mb-3">确认发送账单？</h2>
            <p class="text-gray-600 mb-8">此操作将会通过APP向客户【李明】推送服务费账单通知。请确认账单数据无误。</p>
            <div class="flex justify-center mt-8 space-x-4">
                <button onclick="hideModal('sendBillConfirmModal')"
                    class="bg-gray-200 text-gray-800 px-6 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700">确定发送</button>
            </div>
        </div>
    </div>
    <div id="verificationModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl">
            <div class="flex justify-between items-center border-b pb-3 mb-6">
                <h2 class="text-xl font-bold text-gray-800">客户付款核销</h2><button onclick="hideModal('verificationModal')"
                    class="text-gray-500 hover:text-gray-800"><i data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <table class="detail-table mb-6">
                <tbody>
                    <tr>
                        <td class="label">合同编号</td>
                        <td class="value">CON-2024-05-102</td>
                        <td class="label">客户姓名</td>
                        <td class="value">王芳</td>
                    </tr>
                    <tr>
                        <td class="label">本期应付管理费(USDT)</td>
                        <td class="value"><span class="font-bold text-indigo-600">240.00 USDT</span></td>
                        <td class="label">客户手机号码</td>
                        <td class="value">139****1234</td>
                    </tr>
                </tbody>
            </table>
            <div class="mb-4"><label class="font-medium text-gray-700 text-sm">支付交易哈希 / 链上记录</label><input type="text"
                    placeholder="请输入客户付款的交易哈希(TxID)" class="border rounded-lg px-3 py-2 w-full mt-1"></div>
            <div class="mb-4"><label class="font-medium text-gray-700 text-sm">上传支付凭证 (截图等)</label>
                <div class="mt-1 p-4 border-2 border-dashed rounded-lg text-center cursor-pointer hover:bg-gray-50"><i
                        data-lucide="upload-cloud" class="mx-auto h-8 w-8 text-gray-400"></i>
                    <p class="text-sm text-gray-500">点击或拖拽文件到此区域上传</p>
                </div>
            </div>
            <div class="mb-6"><label class="font-medium text-gray-700 text-sm">财务备注</label><textarea
                    placeholder="可在此添加备注信息, 如核对时间等..." class="border rounded-lg px-3 py-2 w-full mt-1"
                    rows="2"></textarea></div>
            <div class="flex justify-end mt-6">
                <div class="space-x-3"><button
                        class="bg-red-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-600">核销驳回</button><button
                        class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700">确认收款</button>
                </div>
            </div>
        </div>
    </div>
    <div id="approvalModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-5xl">
            <div class="flex justify-between items-center border-b pb-3 mb-6">
                <h2 class="text-xl font-bold text-gray-800">分润申请审核</h2><button onclick="hideModal('approvalModal')"
                    class="text-gray-500 hover:text-gray-800"><i data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <dl class="trader-detail-grid mb-6">
                <dt>申请ID:</dt>
                <dd>PAY-REQ-00125</dd>
                <dt>操盘手:</dt>
                <dd>李娜 (激进先锋)</dd>
                <dt>申请时间:</dt>
                <dd>2024-06-02 10:30</dd>
                <dt>申请金额:</dt>
                <dd class="text-green-600 font-bold text-lg">12,500.00 USDT</dd>
            </dl>
            <h3 class="text-base font-semibold text-gray-700 mb-2 mt-4">业绩报酬明细</h3>
            <div class="overflow-y-auto max-h-64 border rounded-lg">
                <table class="w-full text-sm">
                    <thead class="bg-gray-100 sticky top-0">
                        <tr>
                            <th class="p-2 text-left font-semibold">关联合同</th>
                            <th class="p-2 text-left font-semibold">客户</th>
                            <th class="p-2 text-left font-semibold">服务费</th>
                            <th class="p-2 text-left font-semibold">业绩报酬</th>
                            <th class="p-2 text-left font-semibold">客户付款状态</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b">
                            <td class="p-2">..-05-101</td>
                            <td class="p-2">李明</td>
                            <td class="p-2">450.00</td>
                            <td class="p-2 text-green-600">+300.00</td>
                            <td class="p-2"><span class="badge badge-yellow">待支付</span></td>
                        </tr>
                        <tr class="border-b">
                            <td class="p-2">..-05-109</td>
                            <td class="p-2">张强</td>
                            <td class="p-2">3,000.00</td>
                            <td class="p-2 text-green-600">+2,000.00</td>
                            <td class="p-2"><span class="badge badge-green">已支付</span></td>
                        </tr>
                        <tr class="border-b">
                            <td class="p-2">..-05-115</td>
                            <td class="p-2">王伟</td>
                            <td class="p-2">15,000.00</td>
                            <td class="p-2 text-green-600">+10,200.00</td>
                            <td class="p-2"><span class="badge badge-green">已支付</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="mb-6 mt-4"><label class="font-medium text-gray-700 text-sm">审核备注</label><textarea
                    placeholder="若驳回，请务必填写原因。选填。" class="border rounded-lg px-3 py-2 w-full mt-1" rows="2"></textarea>
            </div>
            <div class="flex justify-end mt-6">
                <div class="space-x-3"><button
                        class="bg-red-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-600">审核驳回</button><button
                        class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700">审核通过</button><button
                        onclick="hideModal('approvalModal')"
                        class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-400">取消</button>
                </div>
            </div>
        </div>
    </div>
    <div id="paymentConfirmModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-2xl">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-2xl font-bold text-gray-800">确认付款</h2><button onclick="hideModal('paymentConfirmModal')"
                    class="text-gray-500 hover:text-gray-800"><i data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <div class="space-y-4">
                <div class="flex items-baseline">
                    <p class="font-medium text-gray-600 w-32 text-right mr-4">操盘手姓名:</p>
                    <p class="font-semibold text-gray-800">王强</p>
                </div>
                <div class="flex items-baseline">
                    <p class="font-medium text-gray-600 w-32 text-right mr-4">收款地址(TRC20):</p>
                    <p class="font-mono text-gray-800 text-sm">TAbcde...FGhijkLMN <i data-lucide="copy"
                            class="inline-block h-4 w-4 text-gray-500 hover:text-indigo-600 cursor-pointer"></i></p>
                </div>
                <div class="flex items-baseline">
                    <p class="font-medium text-gray-600 w-32 text-right mr-4">支付金额:</p>
                    <p class="font-bold text-3xl text-green-600">420.00 USDT</p>
                </div>
                <hr class="my-4" />
                <div><label for="paymentHash" class="block font-medium text-gray-700 mb-1">支付交易哈希 (TxID)</label><input
                        type="text" id="paymentHash" class="border rounded-lg px-3 py-2 w-full"
                        placeholder="请输入链上交易哈希/ID，用于对账"></div>
                <div><label for="paymentNotes" class="block font-medium text-gray-700 mb-1">支付备注</label><textarea
                        id="paymentNotes" rows="2" class="border rounded-lg px-3 py-2 w-full"
                        placeholder="选填，可输入内部备注信息"></textarea></div>
            </div>
            <div class="flex justify-end mt-8 space-x-3"><button onclick="hideModal('paymentConfirmModal')"
                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button><button
                    class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700">确认已支付</button>
            </div>
        </div>
    </div>
    <!-- 待结算账单详情页 -->
    <div id="billDetailModall" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-7xl">
            <div class="flex justify-between items-center border-b pb-3 mb-6">
                <h2 class="text-xl font-bold text-gray-800">本期结算账单详情</h2><button onclick="hideModal('billDetailModall')"
                    class="text-gray-500 hover:text-gray-800"><i data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <table class="detail-table mb-6">
                <tbody>
                    <tr>
                        <td class="label">合同编号</td>
                        <td class="value">CON-2024-05-101</td>
                        <td class="label">账单编号</td>
                        <td class="value">BILL-C-05-101</td>
                    </tr>
                    <tr>
                        <td class="label">结算周期</td>
                        <td class="value">2025/03/01 - 2025/06/31</td>
                        <td class="label">本期应付管理费</td>
                        <td class="value font-bold text-indigo-600">420.00 USDT</td>
                    </tr>
                    <tr>
                        <td class="label">是否开票</td>
                        <td class="value">否</td>
                    </tr>
                    <tr>
                        <td class="label">收款账户</td>
                        <td class="value" colspan="3"><select class="border rounded-lg px-3 py-1.5 w-full">
                                <option>TRC20: T...xyz (默认)</option>
                                <option>ERC20: 0x...abc</option>
                            </select></td>
                    </tr>
                </tbody>
            </table>
            <h3 class="text-lg font-semibold text-gray-700 mb-3 mt-6 border-t pt-4">费用计算明细</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-blue-50">
                        <tr>
                            <th class="p-3 text-left font-semibold">期初资金</th>
                            <th class="p-3 text-left font-semibold">期末资金</th>
                            <th class="p-3 text-left font-semibold">本期总收益</th>
                            <th class="p-3 text-left font-semibold">管理费率</th>
                            <th class="p-3 text-left font-semibold">本期应付管理费</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b">
                            <td class="p-3">50,000.00</td>
                            <td class="p-3">51,500.00</td>
                            <td class="p-3 text-green-600 font-semibold">+2,100.00</td>
                            <td class="p-3">20%</td>
                            <td class="p-3 font-bold">420.00</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="flex justify-end mt-6 space-x-3"><button onclick="hideModal('billDetailModall')"
                    class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-400">返回</button>
            </div>
        </div>
    </div>


    
    <!-- 待发送账单详情页 -->
    <div id="billDetailModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-7xl">
            <div class="flex justify-between items-center border-b pb-3 mb-6">
                <h2 class="text-xl font-bold text-gray-800">账单详情</h2><button onclick="hideModal('billDetailModal')"
                    class="text-gray-500 hover:text-gray-800"><i data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <table class="detail-table mb-6">
                <tbody>
                    <tr>
                        <td class="label">合同编号</td>
                        <td class="value">CON-2024-05-101</td>
                        <td class="label">账单编号</td>
                        <td class="value">BILL-C-05-101</td>
                    </tr>
                    <tr>
                        <td class="label">结算周期</td>
                        <td class="value">2025/03/01 - 2025/03/31</td>
                        <td class="label">本期应付管理费</td>
                        <td class="value font-bold text-indigo-600">450.00 USDT</td>
                    </tr>
                    <tr>
                        <td class="label">是否开票</td>
                        <td class="value">否</td>
                    </tr>
                    <tr>
                        <td class="label">收款账户</td>
                        <td class="value" colspan="3"><select class="border rounded-lg px-3 py-1.5 w-full">
                                <option>TRC20: T...xyz (默认)</option>
                                <option>ERC20: 0x...abc</option>
                            </select></td>
                    </tr>
                </tbody>
            </table>
            <h3 class="text-lg font-semibold text-gray-700 mb-3 mt-6 border-t pt-4">费用计算明细</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-blue-50">
                        <tr>
                            <th class="p-3 text-left font-semibold">期初资金</th>
                            <th class="p-3 text-left font-semibold">期末资金</th>
                            <th class="p-3 text-left font-semibold">本期总收益</th>
                            <th class="p-3 text-left font-semibold">管理费率</th>
                            <th class="p-3 text-left font-semibold">本期应付管理费</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b">
                            <td class="p-3">50,000.00</td>
                            <td class="p-3">51,500.00</td>
                            <td class="p-3 text-green-600 font-semibold">+1,500.00</td>
                            <td class="p-3">30%</td>
                            <td class="p-3 font-bold">450.00</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="flex justify-end mt-6 space-x-3"><button onclick="hideModal('billDetailModal')"
                    class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-400">返回</button>
            </div>
        </div>
    </div>
    <div id="traderBillDetailModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-7xl">
            <div class="flex justify-between items-center border-b pb-3 mb-6">
                <h2 class="text-xl font-bold text-gray-800">操盘手分润详情</h2><button
                    onclick="hideModal('traderBillDetailModal')" class="text-gray-500 hover:text-gray-800"><i
                        data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <dl class="trader-detail-grid mb-6">
                <dt>操盘手:</dt>
                <dd>李娜 (激进先锋)</dd>
                <dt>分润状态:</dt>
                <dd><span class="badge badge-purple">审核中</span></dd>
                <dt>申请时间:</dt>
                <dd>2024-06-02 10:30</dd>
                <dt>应付业绩报酬:</dt>
                <dd class="text-green-600 font-bold text-lg">12,500.00 USDT</dd>
            </dl>
            <h3 class="text-lg font-semibold text-gray-700 mb-3 mt-6 border-t pt-4">收益来源明细</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="p-3 text-left font-semibold">关联合同</th>
                            <th class="p-3 text-left font-semibold">客户</th>
                            <th class="p-3 text-left font-semibold">客户总收益</th>
                            <th class="p-3 text-left font-semibold">平台总服务费</th>
                            <th class="p-3 text-left font-semibold">操盘手分成比例</th>
                            <th class="p-3 text-left font-semibold">操盘手应得报酬</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b">
                            <td class="p-3">..-05-101</td>
                            <td class="p-3">李明</td>
                            <td class="p-3 text-green-600">+1,500.00</td>
                            <td class="p-3">450.00</td>
                            <td class="p-3">20%</td>
                            <td class="p-3 text-green-600 font-bold">300.00</td>
                        </tr>
                        <tr class="border-b">
                            <td class="p-3">..-05-109</td>
                            <td class="p-3">张强</td>
                            <td class="p-3 text-green-600">+10,000.00</td>
                            <td class="p-3">3,000.00</td>
                            <td class="p-3">20%</td>
                            <td class="p-3 text-green-600 font-bold">2,000.00</td>
                        </tr>
                        <tr class="border-b">
                            <td class="p-3">..-05-115</td>
                            <td class="p-3">王伟</td>
                            <td class="p-3 text-green-600">+51,000.00</td>
                            <td class="p-3">15,300.00</td>
                            <td class="p-3">20%</td>
                            <td class="p-3 text-green-600 font-bold">10,200.00</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="flex justify-end mt-6 space-x-3"><button onclick="hideModal('traderBillDetailModal')"
                    class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-400">返回</button>
            </div>
        </div>
    </div>
    <div id="traderRequestPaymentModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-2xl">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-2xl font-bold text-gray-800">确认发起支付申请</h2><button
                    onclick="hideModal('traderRequestPaymentModal')" class="text-gray-500 hover:text-gray-800"><i
                        data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <div class="space-y-4">
                <div class="flex items-baseline">
                    <p class="font-medium text-gray-600 w-32 text-right mr-4">申请条目数:</p>
                    <p id="modal-request-count" class="font-semibold text-gray-800">4 条</p>
                </div>
                <div class="flex items-baseline">
                    <p class="font-medium text-gray-600 w-32 text-right mr-4">收款账户(TRC20):</p>
                    <p class="font-mono text-gray-800 text-sm">TAjw98a...5Xyzv (默认)</p>
                </div>
                <div class="flex items-baseline">
                    <p class="font-medium text-gray-600 w-32 text-right mr-4">申请总金额:</p>
                    <p id="modal-request-amount" class="font-bold text-3xl text-green-600">12,680.00 USDT</p>
                </div>
                <hr class="my-4" />
                <p class="text-sm text-gray-500 text-center">平台将在收到申请后的1-3个工作日内进行审核与付款，请耐心等待。</p>
            </div>
            <div class="flex justify-end mt-8 space-x-3"><button onclick="hideModal('traderRequestPaymentModal')"
                    class="bg-gray-200 text-gray-800 px-6 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button><button
                    class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认发起</button>
            </div>
        </div>
    </div>
    <div id="accountModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
            <h2 id="accountModalTitle" class="text-2xl font-bold text-gray-800 mb-6">新增账号</h2>
            <form id="accountModalForm" class="space-y-4">
                <div><label class="font-medium text-sm">账号</label><input type="text" name="account"
                        class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label class="font-medium text-sm">密码</label><input type="password" name="password"
                        placeholder="留空则不修改" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label class="font-medium text-sm">姓名</label><input type="text" name="name"
                        class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label class="font-medium text-sm">手机号码</label><input type="text" name="phone"
                        class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label class="font-medium text-sm">公司</label><input type="text" name="company"
                        class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label class="font-medium text-sm">角色</label><select name="role"
                        class="border rounded-lg px-4 py-2 w-full mt-1">
                        <option>超级管理员</option>
                        <option>运营人员</option>
                        <option>操盘手</option>
                    </select></div>
                <div class="flex items-center"><label class="font-medium text-sm mr-4">状态</label><label
                        class="switch"><input type="checkbox" name="status" checked><span
                            class="slider"></span></label><span class="ml-2 text-gray-600">启用</span></div>
            </form>
            <div class="flex justify-end mt-8 space-x-3">
                <button onclick="hideModal('accountModal')"
                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认</button>
            </div>
        </div>
    </div>
    <div id="roleModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-4xl max-h-[90vh] flex flex-col">
            <h2 id="roleModalTitle" class="text-2xl font-bold text-gray-800 mb-6 flex-shrink-0">新增角色</h2>
            <div class="flex-grow modal-content-area pr-2">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 h-full">
                    <div class="md:col-span-1 space-y-4">
                        <div><label class="font-medium text-sm">角色名称</label><input type="text" id="roleNameInput"
                                class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                        <div><label class="font-medium text-sm">描述</label><textarea id="roleDescInput" rows="4"
                                class="border rounded-lg px-4 py-2 w-full mt-1"></textarea></div>
                    </div>
                    <div class="md:col-span-2 border-l pl-6">
                        <h3 class="font-semibold text-lg mb-2">权限选择</h3>
                        <div id="permissionTreeContainer" class="permission-tree"></div>
                    </div>
                </div>
            </div>
            <div class="flex justify-end mt-8 space-x-3 flex-shrink-0 pt-4 border-t">
                <button onclick="hideModal('roleModal')"
                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button id="roleModalConfirmBtn"
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认</button>
            </div>
        </div>
    </div>
    <div id="smsChannelModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
            <h2 id="smsChannelModalTitle" class="text-2xl font-bold text-gray-800 mb-6">新增短信渠道</h2>
            <form id="smsChannelModalForm" class="space-y-4">
                <div><label class="font-medium text-sm">渠道类型</label><select name="channelType"
                        class="border rounded-lg px-4 py-2 w-full mt-1">
                        <option disabled selected>请选择</option>
                        <option>验证码短信渠道</option>
                        <option>通知类短信渠道</option>
                    </select></div>
                <div><label class="font-medium text-sm">渠道名称</label><input type="text" name="channelName"
                        placeholder="请输入" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label class="font-medium text-sm">AccessKey</label><input type="text" name="accessKey"
                        placeholder="请输入" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label class="font-medium text-sm">AccessSecret</label><input type="password" name="accessSecret"
                        placeholder="请输入" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label class="font-medium text-sm">SenderID</label><input type="text" name="senderId"
                        placeholder="请输入" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div class="flex items-center pt-2"><label class="font-medium text-sm mr-4">状态</label><label
                        class="switch"><input type="checkbox" name="status" checked><span
                            class="slider"></span></label><span class="ml-2 text-gray-600">开启</span></div>
            </form>
            <div class="flex justify-end mt-8 space-x-3">
                <button onclick="hideModal('smsChannelModal')"
                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认</button>
            </div>
        </div>
    </div>
    <div id="appSmsModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
            <h2 id="appSmsModalTitle" class="text-2xl font-bold text-gray-800 mb-6">新增短信配置</h2>
            <form id="appSmsModalForm" class="space-y-4">
                <div><label class="font-medium text-sm">短信名称</label><select name="smsName"
                        class="border rounded-lg px-4 py-2 w-full mt-1">
                        <option disabled selected>请选择</option>
                        <option>注册登录</option>
                        <option>找回密码</option>
                        <option>结算通知</option>
                        <option>风控告警</option>
                    </select></div>
                <div><label class="font-medium text-sm">渠道类型</label><select name="channelType"
                        class="border rounded-lg px-4 py-2 w-full mt-1">
                        <option disabled selected>请选择</option>
                        <option>验证码短信渠道</option>
                        <option>通知类短信渠道</option>
                    </select></div>
                <div><label class="font-medium text-sm">发送方式</label><select name="sendType"
                        class="border rounded-lg px-4 py-2 w-full mt-1">
                        <option>及时触发</option>
                        <option>定时触发</option>
                    </select></div>
                <div><label class="font-medium text-sm">模板内容</label><textarea name="templateContent" rows="4"
                        placeholder="请输入，使用{变量名}作为占位符" class="border rounded-lg px-4 py-2 w-full mt-1"></textarea></div>
                <div class="flex items-center pt-2"><label class="font-medium text-sm mr-4">状态</label><label
                        class="switch"><input type="checkbox" name="status" checked><span
                            class="slider"></span></label><span class="ml-2 text-gray-600">开启</span></div>
            </form>
            <div class="flex justify-end mt-8 space-x-3">
                <button onclick="hideModal('appSmsModal')"
                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认</button>
            </div>
        </div>
    </div>
    <div id="richTextConfigModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center p-4 border-b">
                <h2 id="richTextConfigModalTitle" class="text-2xl font-bold text-gray-800">编辑配置项</h2><button
                    onclick="hideModal('richTextConfigModal')" class="text-gray-500 hover:text-gray-800"><i
                        data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <div class="flex-grow p-4 modal-content-area">
                <div id="config-editor-container" class="bg-white border rounded-lg h-full"></div>
            </div>
            <div id="richTextConfigModalButtons" class="flex justify-end p-4 border-t bg-gray-50 space-x-3">
                <button onclick="hideModal('richTextConfigModal')"
                    class="bg-gray-200 text-gray-800 px-6 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认</button>
            </div>
        </div>
    </div>
    <div id="contactConfigModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
            <h2 id="contactConfigModalTitle" class="text-2xl font-bold text-gray-800 mb-6">编辑配置项</h2>
            <div class="space-y-4">
                <div><label for="contactPhone" class="font-medium text-sm text-gray-700">客服电话</label><input type="text"
                        id="contactPhone" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div><label for="contactEmail" class="font-medium text-sm text-gray-700">客服邮箱</label><input type="email"
                        id="contactEmail" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
            </div>
            <div id="contactConfigModalButtons" class="flex justify-end mt-8 space-x-3">
                <button onclick="hideModal('contactConfigModal')"
                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认</button>
            </div>
        </div>
    </div>
    <div id="thresholdConfigModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
            <h2 id="thresholdConfigModalTitle" class="text-2xl font-bold text-gray-800 mb-6">编辑配置项</h2>
            <div>
                <label id="thresholdConfigModalLabel" class="font-medium text-sm text-gray-700">配置值</label>
                <div class="flex items-center mt-1">
                    <input type="number" id="thresholdConfigModalInput" class="border rounded-l-lg px-4 py-2 w-full">
                    <span id="thresholdConfigModalSuffix"
                        class="bg-gray-200 text-gray-700 px-4 py-2 border border-l-0 rounded-r-lg"></span>
                </div>
            </div>
            <div id="thresholdConfigModalButtons" class="flex justify-end mt-8 space-x-3">
                <button onclick="hideModal('thresholdConfigModal')"
                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">确认</button>
            </div>
        </div>
    </div>
    <div id="announcementModal"
        class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl h-full max-h-[95vh] flex flex-col">
            <div class="flex justify-between items-center p-4 border-b">
                <h2 id="announcementModalTitle" class="text-2xl font-bold text-gray-800">发布新公告</h2><button
                    onclick="hideModal('announcementModal')" class="text-gray-500 hover:text-gray-800"><i
                        data-lucide="x" class="h-6 w-6"></i></button>
            </div>
            <div class="flex-grow p-6 modal-content-area space-y-4">
                <div><label class="font-medium text-sm">公告标题</label><input type="text" placeholder="请输入公告标题"
                        class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                <div class="grid grid-cols-2 gap-6">
                    <div><label class="font-medium text-sm">公告类型</label><select
                            class="border rounded-lg px-4 py-2 w-full mt-1">
                            <option>平台公告</option>
                            <option>活动通知</option>
                            <option>系统维护</option>
                        </select></div>
                    <div><label class="font-medium text-sm">排序值</label><input type="number" value="0"
                            placeholder="数字越大，排序越靠前" class="border rounded-lg px-4 py-2 w-full mt-1"></div>
                </div>
                <div class="flex-grow flex flex-col"><label class="font-medium text-sm mb-1">公告内容</label>
                    <div id="announcement-editor-container" class="bg-white border rounded-lg flex-grow"></div>
                </div>
                <div>
                    <label class="font-medium text-sm">发布时间</label>
                    <div class="flex items-center space-x-6 mt-2">
                        <label class="flex items-center"><input type="radio" name="announceTime" value="now" checked
                                class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"> <span
                                class="ml-2">立即发布</span></label>
                        <label class="flex items-center"><input type="radio" name="announceTime" value="scheduled"
                                class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"> <span
                                class="ml-2">定时发送</span></label>
                    </div>
                    <div id="announce-scheduled-time-group" class="mt-2 hidden"><input type="datetime-local"
                            class="border rounded-lg px-4 py-2"></div>
                </div>
            </div>
            <div id="announcementModalButtons" class="flex justify-end p-4 border-t bg-gray-50 space-x-3">
                <button onclick="hideModal('announcementModal')"
                    class="bg-gray-200 text-gray-800 px-6 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-yellow-500 text-white px-6 py-2 rounded-lg font-semibold hover:bg-yellow-600">保存草稿</button>
                <button
                    class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700">发布公告</button>
            </div>
        </div>
    </div>

    <div id="reviewContractModal" class="fixed inset-0 z-50 items-center justify-center hidden"
        onclick="closeModal('reviewContractModal')">
        <div class="modal-backdrop fixed inset-0"></div>
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl mx-auto my-12 relative" onclick="event.stopPropagation()">
            <div class="flex items-start justify-between p-5 border-b rounded-t">
                <h3 class="text-xl font-semibold text-gray-900">
                    审核合同 - CON-20240828-001
                </h3>
                <button type="button"
                    class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center"
                    onclick="closeModal('reviewContractModal')">
                    <i class="h-5 w-5" data-feather="x"></i>
                    <span class="sr-only">Close modal</span>
                </button>
            </div>
            <div class="p-6 space-y-6 max-h-[70vh] overflow-y-auto">
                 <div class="bg-gray-50 p-4 rounded-lg border">
                    <h4 class="text-md font-semibold text-gray-800 mb-3">核心信息</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                        <div><span class="text-gray-500">客户姓名:</span> <span class="font-medium text-gray-900">王五</span></div>
                        <div><span class="text-gray-500">操盘手姓名:</span> <span class="font-medium text-gray-900">王六</span></div>
                        <div><span class="text-gray-500">委托金额:</span> <span class="font-medium text-gray-900">50,000 USDT</span></div>
                        <div><span class="text-gray-500">委托期限:</span> <span class="font-medium text-gray-900">12 个月</span></div>
                    </div>
                </div>

                <div>
                    <h4 class="text-md font-semibold text-gray-800 mb-3">合同正文预览</h4>
                    <div class="p-6 border rounded-lg h-96 overflow-y-scroll bg-white">
                        <h1 class="text-center text-xl font-bold mb-4">标准跟单服务合同</h1>
                        <p class="mb-2 text-sm text-gray-600">合同编号: CON-20240828-001</p>
                        <p class="mb-4 text-sm text-gray-600">签订日期: 2024年08月28日</p>
                        
                        <p class="font-semibold">甲方（客户）: 王五 (ID: C00101)</p>
                        <p class="font-semibold mb-4">乙方（服务方）: 币联CoinLink平台</p>

                        <p class="text-gray-700 leading-relaxed">
                            根据《中华人民共和国合同法》及相关法律法规，甲乙双方在平等、自愿的基础上，就甲方向乙方购买数字资产跟单技术服务事宜，达成如下协议：
                            <br><br>
                            <strong>第一条 服务内容</strong><br>
                            1.1 乙方为甲方提供基于API的自动化跟单技术服务，使甲方在交易所的账户能够依据所选策略进行交易。
                            <br>
                            1.2 本合同约定的服务金额为 <strong>50,000 USDT</strong>，服务期限为 <strong>12 个月</strong>。
                            <br><br>
                            <strong>第二条 双方权利与义务</strong><br>
                            2.1 甲方保证其API Key不开启提现权限，并对因API Key泄露或配置错误造成的损失自行承担责任。
                            <br>
                            2.2 乙方负责提供稳定、可靠的技术服务，但不对任何交易策略的盈利性做出承诺或保证。
                            <br>
                            ... (更多条款) ...
                            <br><br>
                            <strong>第十条 法律适用与争议解决</strong><br>
                            本合同适用中华人民共和国法律。因本合同引起的或与本合同有关的任何争议，由双方友好协商解决；协商不成的，任何一方均有权向乙方所在地有管辖权的人民法院提起诉讼。
                            <br><br>
                        </p>
                        <div class="mt-8 grid grid-cols-2 gap-8">
                            <div>
                                <p class="font-semibold">甲方（客户）签署:</p>
                                <div class="h-20 mt-2 border-2 border-dashed rounded-lg flex items-center justify-center">
                                    <p class="text-green-600 font-bold">[电子签名 - 王五]</p>
                                </div>
                            </div>
                             <div>
                                <p class="font-semibold">乙方（平台）签署:</p>
                                <div class="h-20 mt-2 border-2 border-dashed rounded-lg flex items-center justify-center">
                                    <p class="text-gray-400">待平台签署...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div id="modal-action-buttons"  class="flex items-center justify-end p-6 space-x-4 border-t border-gray-200 rounded-b bg-gray-50">
                <button type="button"
                    class="text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-6 py-2.5 text-center">拒绝</button>
                <button type="button"
                    class="text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-6 py-2.5 text-center">通过并签署</button>
            </div>
        </div>
    </div>

    <div id="sendBillConfirmModall"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4"
        style="display: none;">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-lg text-center">
            <i data-lucide="send" class="mx-auto h-16 w-16 text-indigo-500 mb-4"></i>
            <h2 class="text-2xl font-bold text-gray-800 mb-3">确认结算？</h2>
            <p class="text-gray-600 mb-8">请先跟操盘手确认详情内相关付款信息及金额后，再确认结算。</p>
            <div class="flex justify-center mt-8 space-x-4">
                <button onclick="hideModal('sendBillConfirmModall')"
                    class="bg-gray-200 text-gray-800 px-6 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button
                    class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700">确定</button>
            </div>
        </div>

    <!-- ========== MODAL: 账单详情 ========== -->
    <div id="billDetailModal" class="modal">
        <div class="modal-content w-full max-w-2xl">
            <div class="modal-header">
                <h3 class="text-lg font-semibold">账单详情</h3>
                <button onclick="closeModal('billDetailModal')" class="modal-close-button">&times;</button>
            </div>
            <div class="modal-body">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
                    <div class="col-span-full border-b pb-2 mb-2">
                        <dt class="font-semibold text-gray-800">核心信息</dt>
                    </div>
                    <div><dt class="text-sm font-medium text-gray-500">账单ID</dt><dd class="mt-1 font-mono">BILL-CUST-00158</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">账单状态</dt><dd class="mt-1"><span class="badge badge-blue">待发送</span></dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">关联合同</dt><dd class="mt-1 font-mono">CON-2024-05-101</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">结算周期</dt><dd class="mt-1">2024/05/01 - 2024/05/31</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">客户信息</dt><dd class="mt-1">李明 (138****8888)</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">操盘手</dt><dd class="mt-1">激进先锋</dd></div>
                    
                    <div class="col-span-full border-b pb-2 mb-2 mt-4">
                        <dt class="font-semibold text-gray-800">费用明细</dt>
                    </div>
                    <div><dt class="text-sm font-medium text-gray-500">委托本金</dt><dd class="mt-1 font-semibold">10,000.00 USDT</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">本期总收益</dt><dd class="mt-1 font-semibold text-green-600">+1,500.00 USDT</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">服务费率</dt><dd class="mt-1">30%</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">应付服务费</dt><dd class="mt-1 font-bold text-xl text-indigo-600">450.00 USDT</dd></div>

                    <div class="col-span-full border-b pb-2 mb-2 mt-4">
                        <dt class="font-semibold text-gray-800">时间戳</dt>
                    </div>
                    <div><dt class="text-sm font-medium text-gray-500">账单生成时间</dt><dd class="mt-1">2024-06-01 00:05:12</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">账单发送时间</dt><dd class="mt-1 text-gray-400">--</dd></div>
                    <div><dt class="text-sm font-medium text-gray-500">确认收款时间</dt><dd class="mt-1 text-gray-400">--</dd></div>
                </dl>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('billDetailModal')" class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700">关闭</button>
            </div>
        </div>
    </div>


    <!-- ========== MODAL: 客户付款核销 ========== -->
    <div id="verificationModal" class="modal">
        <div class="modal-content w-full max-w-lg">
            <div class="modal-header">
                <h3 class="text-lg font-semibold">客户付款核销</h3>
                <button onclick="closeModal('verificationModal')" class="modal-close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="bg-gray-50 border border-gray-200 p-4 rounded-lg mb-6">
                    <p class="text-sm text-gray-600">您正在为以下账单进行核销：</p>
                    <div class="mt-2 space-y-1">
                        <div><span class="font-semibold text-gray-500">客户姓名:</span> <span>王芳</span></div>
                        <div><span class="font-semibold text-gray-500">应付金额:</span> <span class="font-bold text-lg text-purple-600">240.00 USDT</span></div>
                    </div>
                </div>

                <!-- 付款凭证上传 -->
                <div>
                    <label class="font-medium text-gray-700 text-sm">付款凭证 (截图、转账记录等)</label>
                    <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md">
                        <div class="space-y-1 text-center">
                            <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                                <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <div class="flex text-sm text-gray-600">
                                <label for="file-upload" class="relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none">
                                    <span>上传文件</span>
                                    <input id="file-upload" name="file-upload" type="file" class="sr-only">
                                </label>
                                <p class="pl-1">或拖拽到这里</p>
                            </div>
                            <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
                        </div>
                    </div>
                </div>
                
                <!-- 财务备注 -->
                <div class="mt-6">
                    <label class="font-medium text-gray-700 text-sm">财务备注 (选填)</label>
                    <textarea placeholder="可在此添加备注信息, 如核对时间、沟通记录等..." class="border rounded-lg px-3 py-2 w-full mt-1" rows="2"></textarea>
                </div>
            </div>
            <div class="modal-footer justify-between">
                <!-- 取消操作放在左侧，作为次要危险操作 -->
                <button class="bg-red-100 text-red-700 px-4 py-2 rounded-lg font-semibold hover:bg-red-200">取消</button>
                
                <!-- 主要操作放在右侧 -->
                <div class="space-x-3">
                    <button onclick="closeModal('verificationModal')" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                    <button class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700">确认收款</button>
                </div>
            </div>
        </div>
    </div>    

    <!-- ========== MODAL: 分润申请审核 ========== -->
    <div id="approvalModal" class="modal">
        <div class="modal-content w-full max-w-3xl">
            <div class="modal-header">
                <h3 class="text-lg font-semibold">分润申请审核</h3>
                <button onclick="closeModal('approvalModal')" class="modal-close-button">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 概要信息 -->
                <div class="bg-gray-50 border border-gray-200 p-4 rounded-lg mb-6">
                    <div class="grid grid-cols-3 gap-4">
                        <div><dt class="text-sm font-medium text-gray-500">申请ID</dt><dd class="mt-1 font-mono">PAY-REQ-00125</dd></div>
                        <div><dt class="text-sm font-medium text-gray-500">操盘手</dt><dd class="mt-1 font-semibold">李娜 (激进先锋)</dd></div>
                        <div><dt class="text-sm font-medium text-gray-500">申请总金额</dt><dd class="mt-1 font-bold text-xl text-indigo-600">12,500.00 USDT</dd></div>
                    </div>
                </div>

                <!-- 明细列表 (核心) -->
                <h4 class="font-semibold text-gray-800 mb-2">业绩报酬明细 (共 8 条)</h4>
                <div class="max-h-64 overflow-y-auto border rounded-lg">
                    <table class="custom-table w-full text-sm">
                        <thead class="bg-gray-100">
                            <tr>
                                <th>关联合同</th>
                                <th>客户</th>
                                <th>客户总收益</th>
                                <th>应付业绩报酬</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>CON-2024-05-101</td><td>李**</td><td class="text-green-600">+1,500.00</td><td class="font-semibold">450.00</td></tr>
                            <tr><td>CON-2024-05-109</td><td>张**</td><td class="text-green-600">+8,000.00</td><td class="font-semibold">2,400.00</td></tr>
                            <tr><td>CON-2024-05-115</td><td>王**</td><td class="text-green-600">+10,200.00</td><td class="font-semibold">3,060.00</td></tr>
                            <!-- ... 其它5条明细 ... -->
                            <tr><td>CON-2024-05-130</td><td>赵**</td><td class="text-green-600">+2,100.00</td><td class="font-semibold">630.00</td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- 审核备注 -->
                <div class="mt-6">
                    <label class="font-medium text-gray-700 text-sm">审核备注 (驳回时必填)</label>
                    <textarea placeholder="若驳回, 请在此填写原因, 该原因将对操盘手可见。" class="border rounded-lg px-3 py-2 w-full mt-1" rows="2"></textarea>
                </div>
            </div>
            <div class="modal-footer justify-between">
                <!-- 次要/危险操作 -->
                <button class="bg-red-100 text-red-700 px-4 py-2 rounded-lg font-semibold hover:bg-red-200">驳回申请</button>
                
                <!-- 主要操作 -->
                <div class="space-x-3">
                    <button onclick="closeModal('approvalModal')" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                    <button class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700">审核通过</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== MODAL: 分润付款确认 ========== -->
    <div id="paymentConfirmModal" class="modal">
        <div class="modal-content w-full max-w-lg">
            <div class="modal-header">
                <h3 class="text-lg font-semibold">分润付款确认</h3>
                <button onclick="closeModal('paymentConfirmModal')" class="modal-close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="bg-gray-50 border border-gray-200 p-4 rounded-lg mb-6">
                    <p class="text-sm text-gray-600">请在完成线下转账后，填写凭证信息以完成核销：</p>
                    <div class="mt-2 space-y-1">
                        <div><span class="font-semibold text-gray-500">收款操盘手:</span> <span>王强 (趋势之王)</span></div>
                        <div><span class="font-semibold text-gray-500">收款地址:</span> <span class="font-mono text-sm">TPo1x2...w9X</span></div>
                        <div><span class="font-semibold text-gray-500">待付金额:</span> <span class="font-bold text-lg text-orange-600">6,800.00 USDT</span></div>
                    </div>
                </div>

                <!-- 交易哈希 (TxID) 输入 (核心) -->
                <div>
                    <label for="txid-input" class="font-medium text-gray-700 text-sm">交易哈希 (TxID)</label>
                    <input id="txid-input" type="text" placeholder="请粘贴链上交易的TxID" class="border rounded-lg px-3 py-2 w-full mt-1 font-mono">
                    <p class="text-xs text-gray-500 mt-1">这是确保交易可追溯的关键凭证。</p>
                </div>
                
                <!-- 可选：上传截图作为辅助凭证 -->
                <div class="mt-4">
                    <label class="font-medium text-gray-700 text-sm">上传截图 (选填)</label>
                    <input type="file" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"/>
                </div>

                <!-- 财务备注 -->
                <div class="mt-6">
                    <label class="font-medium text-gray-700 text-sm">财务备注 (选填)</label>
                    <textarea placeholder="可在此添加备注信息, 如实际手续费、支付通道等..." class="border rounded-lg px-3 py-2 w-full mt-1" rows="2"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('paymentConfirmModal')" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300">取消</button>
                <button class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700">确认已付款</button>
            </div>
        </div>
    </div>


    <script>
        // --- Login Logic ---
        function login() { document.getElementById('login-page').style.display = 'none'; document.getElementById('app-container').style.display = 'flex'; lucide.createIcons(); initializeActivePage(); }
        function logout(event) { if (event) event.preventDefault(); document.getElementById('app-container').style.display = 'none'; document.getElementById('login-page').style.display = 'flex'; }

        // --- Core Application Logic ---
        const allPages = document.querySelectorAll('.page');
        const allLinks = document.querySelectorAll('#sidebar-nav a');
        function showPage(pageId, element) { if (event) event.preventDefault(); allPages.forEach(p => { p.style.display = 'none'; }); const targetPage = document.getElementById(pageId); if (targetPage) { targetPage.style.display = 'block'; } allLinks.forEach(l => l.classList.remove('active', 'active-parent')); if (element) { if (!element.classList.contains('sidebar-link')) { element.classList.add('active'); let parentItem = element.closest('.sidebar-item'); if (parentItem && parentItem.parentElement.classList.contains('submenu')) { parentItem = parentItem.parentElement.closest('.sidebar-item'); const parentLink = parentItem.querySelector('a:not(.submenu a)'); if (parentLink) { parentLink.classList.add('active-parent'); parentItem.classList.add('open'); } } } else { element.classList.add('active'); } } lucide.createIcons(); }

        function toggleSubmenu(element, level = 'level-2') {
            // Prevent page jump
            event.preventDefault();

            const parentItem = element.parentElement;
            const submenu = parentItem.querySelector('.submenu, .submenu-level-3');

            if (submenu) {
                // Toggle 'open' class on the link for chevron rotation
                element.classList.toggle('open');
                
                // Simple slide toggle effect
                if (submenu.style.display === "block") {
                    submenu.style.display = "none";
                } else {
                    submenu.style.display = "block";
                }
            }
        }

        // Optional: A helper to manage active states across levels
        // This part is more complex and depends on your `showPage` logic, 
        // but here is a basic concept.
        function setActiveLink(clickedElement) {
            // Remove active from all links first
            document.querySelectorAll('.sidebar-link, .sidebar-link-level-2, .sidebar-link-level-3').forEach(link => {
                link.classList.remove('active');
                link.classList.remove('has-active-child'); // Also remove parent active indicator
            });

            // Add active to the clicked link
            clickedElement.classList.add('active');

            // Add indicator to direct parent (if it's a level 3 link)
            const parentLevel2Item = clickedElement.closest('.sidebar-item-level-2');
            if (parentLevel2Item) {
                const parentLevel2Link = parentLevel2Item.querySelector('.sidebar-link-level-2');
                parentLevel2Link.classList.add('has-active-child');
            }
        }

        // You would call setActiveLink inside your showPage function
        // e.g., function showPage(pageId, element) { ... setActiveLink(element); }        
        
        // function toggleSubmenu(element) { event.preventDefault(); const parentItem = element.closest('.sidebar-item'); if (parentItem) { const wasOpen = parentItem.classList.contains('open'); document.querySelectorAll('.sidebar-item.open').forEach(item => { if (item !== parentItem) item.classList.remove('open'); }); parentItem.classList.toggle('open'); if (!wasOpen && parentItem.classList.contains('open')) { const firstSubmenuLink = parentItem.querySelector('.submenu a'); if (firstSubmenuLink) { const pageId = firstSubmenuLink.getAttribute('onclick').match(/'([^']+)'/)[1]; showPage(pageId, firstSubmenuLink); } } } }
        // 显示指定ID的模态框
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = "flex"; // 使用flex以利用我们设置的居中属性
            }
        }

        // 关闭指定ID的模态框
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = "none";
            }
        }

        // (可选但推荐) 点击模态框外部区域关闭
        window.onclick = function(event) {
            const modals = document.getElementsByClassName('modal');
            for (let i = 0; i < modals.length; i++) {
                if (event.target == modals[i]) {
                    modals[i].style.display = "none";
                }
            }
        }

        // function showModal(modalId) { const modal = document.getElementById(modalId); if (modal) { modal.style.display = 'flex'; lucide.createIcons(); } }
        function hideModal(modalId) { const modal = document.getElementById(modalId); if (modal) modal.style.display = 'none'; if (modalId === 'templateEditorModal' && quill) { quill.setContents([]); } if (modalId === 'richTextConfigModal' && configQuill) { configQuill.setContents([]); configQuill.enable(true); } if (modalId === 'announcementModal' && announcementQuill) { announcementQuill.setContents([]); } }
        let activeTraderSettleTab = 'requestable';
        function initializeActivePage() { const firstLink = document.querySelector('#sidebar-nav a.sidebar-link'); showPage('dashboard', firstLink); switchTraderSettleTab(activeTraderSettleTab); }
        function toggleUserDropdown() { document.getElementById('user-dropdown-menu').classList.toggle('hidden'); }

        // --- Quill Editors Logic ---
        let quill = null, configQuill = null, announcementQuill = null;
        function initializeQuillEditor() { if (!document.getElementById('editor-container')?.querySelector('.ql-toolbar')) { quill = new Quill('#editor-container', { theme: 'snow', modules: { toolbar: [[{ 'header': [1, 2, 3, false] }], ['bold', 'italic', 'underline', 'strike'], [{ 'list': 'ordered' }, { 'list': 'bullet' }], [{ 'color': [] }, { 'background': [] }], ['link'], ['clean']] } }); } }
        function initializeConfigQuillEditor() { if (!document.getElementById('config-editor-container')?.querySelector('.ql-toolbar')) { configQuill = new Quill('#config-editor-container', { theme: 'snow', modules: { toolbar: [[{ 'header': [1, 2, 3, false] }], ['bold', 'italic', 'underline', 'strike'], [{ 'list': 'ordered' }, { 'list': 'bullet' }], [{ 'color': [] }, { 'background': [] }], ['link'], ['clean']] } }); } }
        function initializeAnnouncementQuillEditor() { if (!document.getElementById('announcement-editor-container')?.querySelector('.ql-toolbar')) { announcementQuill = new Quill('#announcement-editor-container', { theme: 'snow', placeholder: '在此输入公告详细内容...', modules: { toolbar: [[{ 'header': [1, 2, 3, false] }], ['bold', 'italic', 'underline', 'strike'], [{ 'list': 'ordered' }, { 'list': 'bullet' }], [{ 'color': [] }, { 'background': [] }], ['link', 'image'], ['clean']] } }); } }

        // --- Role Management Logic ---
        const permissionData = [{ module: '仪表盘', pages: [{ name: '仪表盘', actions: ['查看'] }] }, { module: '客户管理', pages: [{ name: '客户管理', actions: ['查看', '显示Key'] }] }, { module: '操盘手管理', pages: [{ name: '操盘手列表', actions: ['查看', '新增', '编辑'] }, { name: '入驻审核', actions: ['查看', '通过', '拒绝'] }] }, { module: '合同管理', pages: [{ name: '合同列表', actions: ['查看', '筛选'] }, { name: '合同模板管理', actions: ['查看', '创建', '编辑', '删除'] }] }, { module: '收益管理', pages: [{ name: '平台收益总览', actions: ['查看', '导出'] }, { name: '客户收益结算', actions: ['查看', '核销', '详情'] }, { name: '分润审核', actions: ['查看', '审核'] }, { name: '财务付款', actions: ['查看', '付款'] }, { name: '操盘手分润总览', actions: ['查看', '搜索'] }, { name: '我的收益结算', actions: ['查看', '发起申请'] }] }, { module: '系统配置', pages: [{ name: '账号管理', actions: ['查看', '新增', '编辑', '重置密码'] }, { name: '角色管理', actions: ['查看', '新增', '编辑'] }, { name: '短信渠道配置', actions: ['查看', '新增', '编辑', '删除'] }, { name: 'APP短信配置', actions: ['查看', '新增', '编辑', '删除'] }, { name: 'APP配置', actions: ['查看', '编辑'] }, { name: '消息管理', actions: ['查看', '发布', '编辑', '下线', '推送'] }] }, { module: '风控与日志', pages: [{ name: '异常交易监控', actions: ['查看', '处理'] }, { name: 'API Key监控', actions: ['查看'] }, { name: '操作日志', actions: ['查看', '搜索'] }] }];
        function buildPermissionTree(data, isDisabled = false) { let html = '<ul>'; data.forEach(module => { html += `<li><span class="module-name">${module.module}</span><ul>`; module.pages.forEach(page => { html += `<li><span class="page-name">${page.name}</span><div class="actions-list">`; page.actions.forEach(action => { html += `<label class="flex items-center space-x-2"><input type="checkbox" ${isDisabled ? 'disabled' : ''}><span>${action}</span></label>`; }); html += `</div></li>`; }); html += '</ul></li>'; }); html += '</ul>'; return html; }
        function openRoleModal(mode, btn) { const modal = document.getElementById('roleModal'); const title = document.getElementById('roleModalTitle'); const confirmBtn = document.getElementById('roleModalConfirmBtn'); const treeContainer = document.getElementById('permissionTreeContainer'); const roleNameInput = document.getElementById('roleNameInput'); const roleDescInput = document.getElementById('roleDescInput'); roleNameInput.value = ''; roleDescInput.value = ''; roleNameInput.disabled = false; roleDescInput.disabled = false; confirmBtn.style.display = 'block'; if (mode === 'add') { title.textContent = '新增角色'; treeContainer.innerHTML = buildPermissionTree(permissionData, false); } else { const row = btn.closest('tr'); const roleName = row.cells[0].textContent; const roleDesc = row.cells[1].textContent; roleNameInput.value = roleName; roleDescInput.value = roleDesc; roleNameInput.disabled = true; if (mode === 'edit') { title.textContent = '编辑角色'; treeContainer.innerHTML = buildPermissionTree(permissionData, false); treeContainer.querySelectorAll('input[type="checkbox"]').forEach((box, index) => { if (roleName === '超级管理员') box.checked = true; if (roleName === '运营人员' && index < 20) box.checked = true; if (roleName === '操盘手' && index < 5) box.checked = true; }); } else if (mode === 'view') { title.textContent = '角色权限详情'; roleDescInput.disabled = true; confirmBtn.style.display = 'none'; treeContainer.innerHTML = buildPermissionTree(permissionData, true); treeContainer.querySelectorAll('input[type="checkbox"]').forEach((box, index) => { if (roleName === '超级管理员') box.checked = true; if (roleName === '运营人员' && index < 20) box.checked = true; if (roleName === '操盘手' && index < 5) box.checked = true; }); } } showModal('roleModal'); }

        // --- Key Visibility Logic ---
        let currentRowForKeys = null;
        function verifyAndShowKey() { const passwordInput = document.getElementById('op-password'); if (!passwordInput.value) { alert('请输入密码'); return; } if (currentRowForKeys) { const apiKeyContainer = currentRowForKeys.querySelector('.api-key-container span'); const secretKeyContainer = currentRowForKeys.querySelector('.secret-key-container span'); const btn = currentRowForKeys.querySelector('.key-toggle-btn'); apiKeyContainer.textContent = currentRowForKeys.dataset.apiKey; secretKeyContainer.textContent = currentRowForKeys.dataset.secretKey; btn.textContent = '隐藏Key'; btn.classList.add('text-red-600', 'hover:text-red-800'); passwordInput.value = ''; hideModal('keyPasswordModal'); } }

        // --- Trader Modal Logic ---
        function openTraderModal(mode, buttonElement) {
            const modal = document.getElementById('traderModal');
            const title = document.getElementById('traderModalTitle');
            const form = document.getElementById('traderModalForm');
            const saveBtn = document.getElementById('traderModalSaveBtn');
            const allFields = form.querySelectorAll('input, select, textarea');

            form.reset();
            allFields.forEach(field => field.disabled = false);
            saveBtn.style.display = 'inline-block';

            if (mode === 'add') {
                title.textContent = '新增操盘手';
            } else {
                const row = buttonElement.closest('tr');
                const data = {
                    name: row.querySelector('.trader-name')?.textContent ?? '',
                    phone: row.querySelector('.trader-phone')?.textContent ?? '',
                    company: row.querySelector('.trader-company')?.textContent ?? '',
                    nickname: row.querySelector('.trader-nickname')?.textContent ?? '',
                    style: row.querySelector('.trader-style')?.textContent ?? '',
                    experience: row.querySelector('.trader-experience')?.textContent ?? '',
                    min_investment: row.querySelector('.trader-min-investment')?.textContent ?? '',
                    sort: row.querySelector('.trader-sort')?.textContent ?? '',
                    bio: row.querySelector('.trader-bio')?.getAttribute('title') ?? ''
                };
                form.elements['name'].value = data.name;
                form.elements['phone'].value = data.phone;
                form.elements['company'].value = data.company;
                form.elements['nickname'].value = data.nickname;
                form.elements['style'].value = data.style;
                form.elements['experience'].value = data.experience;
                form.elements['min_investment'].value = data.min_investment;
                form.elements['sort'].value = data.sort;
                form.elements['bio'].value = data.bio;

                if (mode === 'edit') {
                    title.textContent = '编辑操盘手信息';
                } else if (mode === 'view') {
                    title.textContent = '查看操盘手详情';
                    allFields.forEach(field => field.disabled = true);
                    saveBtn.style.display = 'none';
                }
            }
            showModal('traderModal');
        }

        /**
         * 打开指定ID的弹窗 (Modal)，并根据模式控制内容
         * @param {string} modalId 要打开的弹窗的ID
         * @param {string} [mode='review'] (可选) 模式，'review' 或 'view'。默认为 'review'
         */
        function openModal(modalId, mode = 'review') { // 接收第二个参数 'mode'
            const modal = document.getElementById(modalId);
            if (!modal) return; // 如果找不到弹窗，直接退出

            // --- 核心逻辑：根据 mode 控制按钮的显示/隐藏 ---
            const actionButtons = document.getElementById('modal-action-buttons');
            if (actionButtons) {
                if (mode === 'view') {
                    // 如果是“查看”模式，隐藏按钮区域
                    actionButtons.classList.add('hidden');
                } else {
                    // 否则 (比如是“审核”模式)，确保按钮区域是显示的
                    // 这很重要，防止你看完一个再审核一个时按钮不出现
                    actionButtons.classList.remove('hidden');
                }
            }
            
            // --- 原有的显示弹窗的逻辑保持不变 ---
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.classList.add('overflow-hidden');
        }

        /**
         * 关闭指定ID的弹窗 (Modal)
         * @param {string} modalId 要关闭的弹窗的ID
         */
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                // 重新添加 hidden class，隐藏弹窗
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                
                // (可选) 恢复背景页面滚动
                document.body.classList.remove('overflow-hidden');
            }
        }

        // --- APP Config Modal Logic ---
        const appConfigData = { about: { title: '关于我们', content: `<h3>关于币联</h3><p>币联是一个安全、透明、合规的资产增值服务平台，致力于为全球用户提供专业的数字资产管理方案。</p><p>我们拥有顶尖的金融科技团队和严格的风控体系，确保客户资产安全与稳定增值。</p>` }, contact: { title: '联系我们', phone: '400-800-8888', email: 'support@coinlink.com' }, userAgreement: { title: '用户协议', content: '<h1>第一条 总则</h1><p>1.1 本协议旨在明确用户在使用币联服务时的权利与义务。用户在注册前应仔细阅读本协议，完成注册即表示完全接受本协议项下的全部条款。</p>' }, privacyPolicy: { title: '隐私协议', content: '<h1>引言</h1><p>我们非常重视您的个人信息和隐私保护。本隐私政策旨在说明我们如何收集、使用、存储、共享和保护您的个人信息。</p>' }, liveness: { title: '活体阈值', label: '通过率', value: 75, suffix: '%' }, one_to_one: { title: '1:1阈值', label: '通过率', value: 75, suffix: '%' }, ocr: { title: 'OCR阈值', label: '单用户每日调用次数', value: 10, suffix: '次' }, esign: { title: '电子签字配置', label: '单用户每日调用次数', value: 10, suffix: '次' } };
        function openConfigModal(mode, configType) { const data = appConfigData[configType]; if (!data) return; const isView = mode === 'view'; if (['about', 'userAgreement', 'privacyPolicy'].includes(configType)) { showModal('richTextConfigModal'); setTimeout(() => { initializeConfigQuillEditor(); document.getElementById('richTextConfigModalTitle').textContent = isView ? `查看 ${data.title}` : `编辑 ${data.title}`; document.getElementById('richTextConfigModalButtons').style.display = isView ? 'none' : 'flex'; configQuill.root.innerHTML = data.content; configQuill.enable(!isView); }, 10); } else if (configType === 'contact') { const modal = document.getElementById('contactConfigModal'); modal.querySelector('#contactConfigModalTitle').textContent = isView ? `查看 ${data.title}` : `编辑 ${data.title}`; modal.querySelector('#contactPhone').value = data.phone; modal.querySelector('#contactEmail').value = data.email; modal.querySelector('#contactPhone').disabled = isView; modal.querySelector('#contactEmail').disabled = isView; modal.querySelector('#contactConfigModalButtons').style.display = isView ? 'none' : 'flex'; showModal('contactConfigModal'); } else if (['liveness', 'one_to_one', 'ocr', 'esign'].includes(configType)) { const modal = document.getElementById('thresholdConfigModal'); modal.querySelector('#thresholdConfigModalTitle').textContent = isView ? `查看 ${data.title}` : `编辑 ${data.title}`; modal.querySelector('#thresholdConfigModalLabel').textContent = data.label; modal.querySelector('#thresholdConfigModalInput').value = data.value; modal.querySelector('#thresholdConfigModalSuffix').textContent = data.suffix; modal.querySelector('#thresholdConfigModalInput').disabled = isView; modal.querySelector('#thresholdConfigModalButtons').style.display = isView ? 'none' : 'flex'; showModal('thresholdConfigModal'); } }

        // --- Other Modal Openers ---
        function openAccountModal(isEdit = false, btn) { showModal('accountModal'); }
        function openSmsChannelModal(isEdit, btn) { showModal('smsChannelModal'); }
        function openAppSmsModal(isEdit, btn) { showModal('appSmsModal'); }
        function openBillDetailModal() { showModal('billDetailModal'); }
        function openBillDetailModall() { showModal('billDetailModall'); }        
        function openVerificationModal() { showModal('verificationModal'); }
        function openTraderBillDetailModal() { showModal('traderBillDetailModal'); }
        function openApprovalModal() { showModal('approvalModal'); }
        function openPaymentConfirmModal() { showModal('paymentConfirmModal'); }
        function openTraderRequestPaymentModal() { const count = document.querySelectorAll('.request-checkbox:checked').length; let totalAmount = 0; document.querySelectorAll('.request-checkbox:checked').forEach(box => { totalAmount += parseFloat(box.dataset.amount); }); document.getElementById('modal-request-count').textContent = `${count} 条`; document.getElementById('modal-request-amount').textContent = `${totalAmount.toFixed(2)} USDT`; showModal('traderRequestPaymentModal'); }
        function openTemplateEditor(isEditMode = false, buttonElement = null) { showModal('templateEditorModal'); setTimeout(() => { initializeQuillEditor(); }, 10); }
        function openAnnouncementModal(isEdit = false) { showModal('announcementModal'); setTimeout(() => { initializeAnnouncementQuillEditor(); }, 10); }

        // --- Tab Switching Logic ---
        function switchContentTab(tabName) { document.querySelectorAll('#settings-content .tab-button').forEach(b => b.classList.remove('active')); document.querySelectorAll('#settings-content .tab-pane').forEach(p => p.classList.remove('active', 'block')); document.querySelector(`#tab-btn-${tabName}`).classList.add('active'); document.querySelector(`#tab-pane-${tabName}`).classList.add('active', 'block'); }
        function switchTraderAppTab(tabName) { document.querySelectorAll('#trader-applications .tab-button').forEach(b => b.classList.remove('active')); document.querySelectorAll('#trader-applications .tab-pane').forEach(p => p.style.display = 'none'); document.querySelector(`#tab-btn-${tabName}`).classList.add('active'); document.querySelector(`#tab-pane-${tabName}`).style.display = 'block'; }
        function switchTraderSettleTab(tabName) { activeTraderSettleTab = tabName; const container = document.getElementById('settle-trader-portal'); if (!container) return; container.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active')); container.querySelectorAll('.tab-pane').forEach(pane => pane.style.display = 'none'); container.querySelector(`button[data-tab='${tabName}']`).classList.add('active'); container.querySelector(`#tab-pane-${tabName}`).style.display = 'block'; }

        // --- Page-specific initializations ---
        document.addEventListener('DOMContentLoaded', function () {
            lucide.createIcons();
            const aumCtx = document.getElementById('aumTrendChart'); if (aumCtx) { new Chart(aumCtx.getContext('2d'), { type: 'line', data: { labels: ['10-01', '10-04', '10-07', '10-10', '10-13', '10-16', '10-19', '10-22', '10-25', '10-28', '10-31'], datasets: [{ label: 'AUM ($)', data: [1150000, 1165000, 1180000, 1175000, 1210000, 1230000, 1225000, 1250000, 1270000, 1265000, 1283450], backgroundColor: 'rgba(79, 70, 229, 0.1)', borderColor: '#4f46e5', tension: 0.4, fill: true, }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { ticks: { callback: (value) => `${value / 1000}k` } } } } }); }
            const profitCtx = document.getElementById('profitTrendChart'); if (profitCtx) { new Chart(profitCtx.getContext('2d'), { type: 'bar', data: { labels: ['May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'], datasets: [{ label: '总收入', data: [55, 62, 78, 75, 92, 85], backgroundColor: '#22c55e' }, { label: '总支出', data: [16, 18, 23, 22, 27, 25], backgroundColor: '#ef4444' }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { ticks: { callback: (value) => `${value}k` } } } } }); }
            const revenueCtx = document.getElementById('revenueSourceChart'); if (revenueCtx) { new Chart(revenueCtx.getContext('2d'), { type: 'doughnut', data: { labels: ['稳健猎手', '激进先锋', '趋势之王', '其他'], datasets: [{ data: [40, 30, 20, 10], backgroundColor: ['#4f46e5', '#34d399', '#f59e0b', '#9ca3af'] }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } } }); }
            const customerTableBody = document.getElementById('customer-table-body'); if (customerTableBody) { customerTableBody.addEventListener('click', function (e) { if (e.target.classList.contains('key-toggle-btn')) { const btn = e.target; const row = btn.closest('tr'); const apiKeyContainer = row.querySelector('.api-key-container span'); if (btn.textContent === '显示Key') { currentRowForKeys = row; showModal('keyPasswordModal'); } else { apiKeyContainer.textContent = '************'; row.querySelector('.secret-key-container span').textContent = '************'; btn.textContent = '显示Key'; btn.classList.remove('text-red-600', 'hover:text-red-800'); } } }); }
            const requestableTable = document.getElementById('requestable-table'); if (requestableTable) { const selectAll = requestableTable.querySelector('#select-all-requestable'); const checkboxes = requestableTable.querySelectorAll('.request-checkbox'); const initiateBtn = document.getElementById('initiate-request-btn'); const countEl = document.getElementById('request-count'); const amountEl = document.getElementById('request-amount'); const updateSelection = () => { const selectedCheckboxes = requestableTable.querySelectorAll('.request-checkbox:checked'); const count = selectedCheckboxes.length; let totalAmount = 0; selectedCheckboxes.forEach(box => { totalAmount += parseFloat(box.dataset.amount); }); initiateBtn.disabled = count === 0; countEl.textContent = count; amountEl.textContent = totalAmount.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }); selectAll.checked = count > 0 && count === checkboxes.length; selectAll.indeterminate = count > 0 && count < checkboxes.length; }; selectAll.addEventListener('change', () => { checkboxes.forEach(box => { box.checked = selectAll.checked; }); updateSelection(); }); checkboxes.forEach(box => { box.addEventListener('change', updateSelection); }); }
            document.querySelectorAll('input[type="radio"][name="pushTarget"], input[type="radio"][name="pushTime"], input[type="radio"][name="announceTime"]').forEach(radio => { radio.addEventListener('change', function () { if (this.name === 'pushTarget') { document.getElementById('specific-user-group').classList.toggle('hidden', this.value !== 'specific'); } if (this.name === 'pushTime') { document.getElementById('scheduled-time-group').classList.toggle('hidden', this.value !== 'scheduled'); } if (this.name === 'announceTime') { document.getElementById('announce-scheduled-time-group').classList.toggle('hidden', this.value !== 'scheduled'); } }); });
            window.addEventListener('click', function (e) { const dropdownContainer = document.getElementById('user-dropdown-container'); if (dropdownContainer && !dropdownContainer.contains(e.target)) { document.getElementById('user-dropdown-menu').classList.add('hidden'); } });
            initializeActivePage();
        });
    </script>

</body>

</html>
